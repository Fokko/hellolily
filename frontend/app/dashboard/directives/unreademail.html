<dashboard-widget widget-name="'Unread email'" widget-class="'col-md-6'" widget-scrollable="true" widget-closeable="true">
    <div name="portlet-caption">
        <i class="fa fa-envelope-o"></i>
        <span class="caption-subject bold uppercase"> UNREAD E-MAIL</span>
        <span class="caption-helper">({{ vm.table.items.length }})</span>
    </div>
    <div name="portlet-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th sort-column="account_name" table="vm.table">Mailbox</th>
                    <th>From</th>
                    <th>Subject</th>
                    <th sort-column="sent_date" table="vm.table">Created</th>
                    <th width="105px">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="message in vm.table.items">
                    <td>{{ message.account_name }}</td>
                    <td>{{ message.sender_name || message.sender_email }}</td>
                    <td>
                        <div>{{ message.subject }}</div><br>
                        <div><em>{{ message.snippet }}</em></div>
                    </td>
                    <td>{{ message.sent_date | relativeDate }}</td>
                    <td>
                        <div><a ui-sref="base.email.reply({id: message.id})"><i class="fa fa-reply"></i> reply</a></div>
                        <div><a ui-sref="base.email.detail({id: message.id})"><i class="fa fa-eye"></i> view</a></div>
                        <div><i class="fa fa-sitemap"></i> create</div>
                    </td>
                </tr>
                <tr ng-hide="vm.table.items.length">
                    <td colspan="5">No unread email messages</td>
                </tr>
            </tbody>
        </table>
    </div>
</dashboard-widget>
