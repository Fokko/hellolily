{% verbatim %}
<div class="inbox-header">
    <h1 class="pull-left" ng-show="table.filter">Search: {{ table.filter }}</h1>
    <h1 class="pull-left" ng-hide="table.filter">
        <span ng-show="account">{{ account.email_address }}</span>
        <span ng-hide="account">All mailboxes</span>
        <span ng-show="label.name"> - {{ label.name }}</span>
        <span ng-hide="label"> - All mail</span>
    </h1>
    <form class="form-inline pull-right">
        <div class="input-group input-medium">
            <input type="text" class="form-control" placeholder="Search" ng-model="table.filter">
            <span class="input-group-btn">
                <button type="submit" class="btn green"><i class="fa fa-search"></i></button>
            </span>
        </div>
    </form>
</div>
<div class="inbox-content">
    <table class="table table-striped table-advance table-hover">
    <thead>
        <tr>
            <th colspan="2">
                <checkbox model="checkboxes.all" ng-click="toggleCheckboxes()"></checkbox>
                <div class="btn-group">
                    <a class="btn btn-sm blue dropdown-toggle" href="javascript:void(0)" data-toggle="dropdown">
                        More <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="javascript:void(0)" ng-click="markAsRead()">
                                <i class="fa fa-pencil"></i> Mark as Read </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" ng-click="markAsUnread()">
                                <i class="fa fa-pencil"></i> Mark as Unread </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" ng-click="trashMessages()" ng-hide="label.id == 'Trash'">
                                <i class="fa fa-trash-o"></i> Trash </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-ban"></i> Spam </a>
                        </li>
                        <li class="divider">
                        </li>
                    </ul>
                </div>
                <a class="btn btn-sm red" href="javascript:void(0)" ng-click="deleteMessages()">
                    <i class="fa fa-trash-o"></i> Delete
                </a>
                <a class="btn btn-sm blue" href="javascript:void(0)" ng-click="archiveMessages()" ng-show="label">
                    <i class="fa fa-archive"></i> Archive
                </a>
                <a class="btn btn-sm blue" href="javascript:void(0)" ng-click="reloadMessages()">
                    <i class="fa fa-refresh"></i> Refresh
                </a>
            </th>
            <th class="pagination-control" colspan="3">
                <span class="pagination-info">
                    {{ table.page * table.pageSize + 1}}-{{ [(table.page + 1) * table.pageSize, table.totalItems] | minValue }} of {{ table.totalItems | number }}
                </span>
                <a class="btn btn-sm blue" ng-click="setPage(table.page - 1)">
                    <i class="fa fa-angle-left"></i>
                </a>
                <a class="btn btn-sm blue" ng-click="setPage(table.page + 1)">
                    <i class="fa fa-angle-right"></i>
                </a>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="message in emailMessages" style="cursor: pointer;" ng-class="{'unread': !message.read}">
            <td class="inbox-small-cells">
                <checkbox model="checkboxes[message.id]"></checkbox>
            </td>
            <td class="view-message hidden-xs" ng-if="label.label_id != 'SENT'" ui-sref="email.detail({id: message.id})">
                <span ng-show="message.sender_name" title="{{ message.sender_email }}">{{ message.sender_name }}</span>
                <span ng-hide="message.sender_name">{{ message.sender_email }}</span>
            </td>
            <td class="view-message hidden-xs" ng-if="label.label_id == 'SENT'" ui-sref="email.detail({id: message.id})">
                {{ message.received_by_name.join(', ') }}
            </td>
            <td class="view-message" ui-sref="email.detail({id: message.id})">
                {{ message.subject }}
            </td>
            <td class="view-message inbox-small-cells" ui-sref="email.detail({id: message.id})">
                <i class="fa fa-paperclip" ng-if="message.has_attachment"></i>
            </td>
            <td class="view-message text-right" ui-sref="email.detail({id: message.id})">
                {{ message.sent_date | relativeDate }}
            </td>
        </tr>
    </tbody>
</table>
</div>
{% endverbatim %}
