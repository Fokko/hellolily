{% extends 'base.html' %}
{% load i18n static %} 

{% block title %}{% trans 'Edit functions' %} - {% endblock %}

{% block styles %}ia="screen" /> -->
<link rel="stylesheet" type="text/css" href="{% static 'plugins/screwdefaultbuttons/css/styles.css' %}" media="screen" />
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="{% url jsi18n packages='lily.functions' %}"></script>
<script type="text/javascript" src="{% static 'plugins/screwdefaultbuttons/js/jquery.screwdefaultbuttons.min.js' %}"></script>
<script type="text/javascript" src="{% static 'contacts/js/functions.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="mws-panel grid_8">
        <div class="mws-panel-header">
            <span class="mws-i-24 i-fountain-pen">{% blocktrans with form.instance.full_name as contact %}Edit functions for {{ contact }}{% endblocktrans %}</span>
        </div>
        <div class="mws-panel-body">
            <form class="mws-form" autocomplete="off" action="" method="post">{% csrf_token %}
                {% if form.non_field_errors %}
                    <div class="mws-form-row">
                        <div class="mws-form-message error no_list_style_type">
                            <span class="field_error">{{ form.non_field_errors }}</span>
                        </div>
                    </div>
                {% endif %}
           
                <div class="mws-form-inline">
					{% for form in formset.forms %}
						 {% if form.instance.pk %}
                            {{ form.id }}
                            {% if formset.can_delete %}
                                <div class="hidden">
                                    {{ form.DELETE }}
                                </div>
                            {% endif %}
                        {% endif %}
                                
	                    <div class="mws-form-row">
							<div class="mws-panel-header">
					            <span class="mws-i-24 i-companies">{{ form.account }}</span>
					        </div>
				        </div>
					
	                    <div class="mws-form-row">
	                        {{ form.title.label_tag }}
	                        <div class="mws-form-item large">                            
	                            {% if form.title.errors %}
	                                <span class="field_error">{{ form.title }}</span>
	                                <div class="mws-error no_list_style_type">
	                                      {{ form.title.errors }}
	                                </div>
	                            {% else %}
	                                {{ form.title }}
	                            {% endif %}
	                        </div>
	                    </div>
	                    
	                    <div class="mws-form-row">
	                        {{ form.department.label_tag }}
	                        <div class="mws-form-item large">                            
	                            {% if form.department.errors %}
	                                <span class="field_error">{{ form.department }}</span>
	                                <div class="mws-error no_list_style_type">
	                                      {{ form.department.errors }}
	                                </div>
	                            {% else %}
	                                {{ form.department }}
	                            {% endif %}
	                        </div>
	                    </div>
	                    
	                    <div class="mws-form-row">
	                        {{ form.manager.label_tag }}
	                        <div class="mws-form-item large">                            
	                            {% if form.manager.errors %}
	                                <span class="field_error">{{ form.manager }}</span>
	                                <div class="mws-error no_list_style_type">
	                                      {{ form.manager.errors }}
	                                </div>
	                            {% else %}
	                                {{ form.manager }}
	                            {% endif %}
	                        </div>
	                    </div>
	                    
	                    <div class="mws-form-row">
	                        {{ form.is_active.label_tag }}
	                        <div class="mws-form-item small">   
	                            {{ form.is_active }}
	                        </div>
	                    </div>
	                    
	                    {% if not forloop.last %}
	                    <hr />
	                    {% endif %}
	                    
	                    {% comment %}
	                    TODO: E-mail address and telephone formsets
	                    {% endcomment %}
	                    
					{% endfor %}
					{{ formset.management_form }}
                
                    <div class="mws-button-row">
                    	{% comment %}
                    	TODO: ask if the user is sure when the form has changed
                    	{% endcomment %}
                    	<a href="{% url contact_edit pk=form.instance.pk %}" class="no-decoration">
                            <button type="button" class="mws-button green">
                                {% trans 'Back' %}
                            </button>
                        </a>
                        <input type="submit" name="submit" value="{% trans 'Save' %}" class="mws-button blue" />
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
