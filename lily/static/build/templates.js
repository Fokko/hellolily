!function(a){"use strict";a.module("app.templates",[]).run(["$templateCache",function(a){a.put("base/breadcrumbs.html",'<ul class="page-breadcrumb breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"> <a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span><i ng-hide="$last" class="fa fa-circle"></i></li></ul>'),a.put("base/page_header.html",'<div class="page-head"><div class="page-title"><h1> {{ conf.pageTitleBig || \'Insert Title\' }} <small>{{ conf.pageTitleSmall || \'Insert Subtitle\' }}</small></h1></div><div class="page-toolbar"><div class="btn-group btn-theme-panel"> <a ng-show="($state.current.name).indexOf(\'detail\')>-1 && ($state.current.name).indexOf(\'email\') == -1" ng-click="$state.go(\'.edit\')" class="btn"><i class="fa fa-edit"></i></a> <a ng-show="($state.current.name).indexOf(\'detail\')>-1 && ($state.current.name).indexOf(\'email\') == -1" detail-delete class="btn" data-target="#confirm-delete"><i class="fa fa-trash"></i></a></div></div></div>'),a.put("accounts/controllers/detail.html",'<div class="row"><div class="col-md-4"><account-detail-widget account="account" height="300"></account-detail-widget></div><div class="col-md-4"><contact-list-widget title="Contacts" list="contactList" height="300" add-link="base.contacts.create.fromAccount({id: {{ account.id }}})"></contact-list-widget></div><div class="col-md-4"><case-list-widget title="Cases" list="caseList" height="91" add-link="base.cases.create.fromAccount({id: {{ account.id }}})"></case-list-widget><deal-list-widget title="Deals" list="dealList" height="91" add-link="base.deals.create.fromAccount({id: {{ account.id }}})"></deal-list-widget></div></div><history-list target="\'account\'" object="account"></history-list>'),a.put("accounts/controllers/list.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Columns<i class="fa fa-columns"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes"><checkbox model="vm.table.visibility.name">Account</checkbox><checkbox model="vm.table.visibility.contactInformation">Contact information</checkbox><checkbox model="vm.table.visibility.assignedTo">Assigned to</checkbox><checkbox model="vm.table.visibility.created">Created</checkbox><checkbox model="vm.table.visibility.modified">Modified</checkbox><checkbox model="vm.table.visibility.tags">Tags</checkbox><checkbox model="vm.table.visibility.customerId">Customer ID</checkbox></div></div> <a ng-click="vm.exportToCsv()" class="btn btn-default">Export accounts</a></div><div class="tools col-xs-12 col-md-6"><form class="form-inline pull-right" action="index.html"><div class="input-group"> <input type="text" class="form-control" ng-model="vm.table.filter" placeholder="Search..."> <span class="input-group-btn"><button class="btn red-pink" ng-click="vm.setFilter(\'\')" ng-disabled="!vm.table.filter"><i class="fa fa-times"></i></button></span></div></form></div></div><div class="portlet-body flip-scroll"><table class="table table-bordered table-striped flip-content"><thead class="flip-content"><tr><th class="list-actions" width="75px"> <span class="text-nowrap">Options</span></th><th ng-show="vm.table.visibility.name" sort-column="name" table="vm.table" class="width-22"> <span class="text-nowrap">Account</span></th><th ng-show="vm.table.visibility.contactInformation" class="width-22"> <span class="text-nowrap">Contact information</span></th><th ng-show="vm.table.visibility.assignedTo" sort-column="assigned_to" table="vm.table" class="width-22"> <span class="text-nowrap">Assigned to</span></th><th ng-show="vm.table.visibility.created" sort-column="created" table="vm.table" class="width-10"> <span class="text-nowrap">Created</span></th><th ng-show="vm.table.visibility.modified" sort-column="modified" table="vm.table" class="width-10"> <span class="text-nowrap">Modified</span></th><th ng-show="vm.table.visibility.tags" sort-column="tag" table="vm.table" class="width-10"> <span class="text-nowrap">Tags</span></th></tr></thead><tbody><tr ng-repeat="account in vm.table.items"><td><a ui-sref="base.accounts.detail.edit({ id: account.id })" class="btn btn-xs default" title="Edit"><i class="fa fa-edit"></i></a> <button type="button" class="btn btn-xs default" title="Delete" ng-click="vm.deleteAccount(account)"><i class="fa fa-trash"></i></button></td><td ng-show="vm.table.visibility.name"> <a ui-sref="base.accounts.detail({ id: account.id })" title="{{ ::account.name }}">{{ ::account.name }}</a></td><td ng-show="vm.table.visibility.contactInformation"><div ng-repeat="email in account.email_addresses | filter: {status: \'!\'+ 0}"><a ui-sref="base.email.composeEmail({ email:email.email_address })" title="{{ ::email.email_address }}"><i class="fa fa-envelope-alt"></i> {{ email.email_address }}</a></div><div ng-repeat="phone in account.phone_work track by $index"><a href="tel:{{ ::phone }}"><i class="fa fa-phone"></i> {{ phone }}</a></div><div ng-repeat="phone in account.phone_mobile track by $index"><a href="tel:{{ ::phone }}"><i class="fa fa-mobile-phone"></i> {{ phone }}</a></div></td><td ng-show="vm.table.visibility.assignedTo"> {{ ::account.assigned_to }}</td><td ng-show="vm.table.visibility.created">{{ ::account.created | relativeDate }}</td><td ng-show="vm.table.visibility.modified">{{ ::account.modified | relativeDate }}</td><td ng-show="vm.table.visibility.tags"> <span ng-repeat="tag in account.tag"><a href="javascript:void(0)" ng-click="vm.setFilter(tag)">{{ ::tag }}</a><br></span></td></tr></tbody></table></div><div class="row"><div class="col-md-7"> Showing {{ (vm.table.page - 1) * vm.table.pageSize }} to {{ vm.table.page * vm.table.pageSize }} of {{ vm.table.totalItems | number }} records</div><div class="col-md-5"><pagination total-items="vm.table.totalItems" ng-model="vm.table.page" items-per-page="vm.table.pageSize" max-size="5"></pagination></div></div></div>'),a.put("accounts/directives/detail_widget.html",'<div class=\'portlet light\'><div class="portlet-title"><div class="caption"><i class="fa fa-building-o"></i> {{ account.name }}</div><div class="actions"><a ng-href="https://freedom.voys.nl/client/{{ account.customer_id }}" target="_blank" class="btn btn-circle btn-default" ng-show="account.customer_id"><i class="fa fa-external-link fa-sm"></i> Freedom</a><a href="https://freedom.voys.nl/quotes/create/" target="_blank" class="btn btn-circle btn-default" ng-hide="account.customer_id"><i class="fa fa-external-link fa-sm"></i> Write quote</a></div></div><div class="portlet-body"><div><div class="scroll-body" slimscroll="{height: height/2}"><p style="white-space: pre-line">{{ account.description || \'No description\' }}</p></div></div><div class="scroll-body" slimscroll="{height: height/2}"><table class="table table-hover no-margin"><tr ng-show="(account.email_addresses | filter: {status: \'!\' + 0}).length"><th> <i class="fa">@</i> Email</th><td><div ng-repeat="email in account.email_addresses | filter: {status: \'!\' + 0}"> <a ui-sref="base.email.composeEmail({email: email.email_address})">{{ email.email_address }}</a></div></td></tr><tr ng-show="account.phones"><th><i class="fa fa-phone"></i> Phone</th><td><div ng-repeat="phone in account.phones"> {{ phone }}</div></td></tr><tr ng-show="account.website"><th><i class="fa fa-globe"></i> Website</th><td><div ng-repeat="site in account.website"> <a href="{{ site }}" target="_blank">{{ site }}</a></div></td></tr><tr ng-show="account.assigned_to"><th><i class="fa fa-child"></i> Assigned to</th><td> {{ account.assigned_to }}</td></tr><tr ng-show="account.address"><th><i class="fa fa-map-marker"></i> Address</th><td><div ng-repeat="address in account.address"> {{ address.address_street }} {{ address.address_street_number }}{{ address.address_complement }}, {{ address.address_postal_code }}<br /> {{ address.address_city }}, {{ address.address_country }}<br /></div></td></tr><tr ng-show="account.tag"><th><i class="fa fa-tag"></i> Tags</th><td> <a class="btn btn-xs btn-default" ng-repeat="tag in account.tag">{{ tag }}</a></td></tr></table></div></div></div>'),a.put("base/controllers/sidebar.html",'<div class="page-sidebar navbar-collapse collapse"><ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200"><li class="start" ui-sref-active="active"><a ui-sref="base.dashboard"><i class="fa fa-home"></i> <span class="title">Dashboard</span></a></li><li ui-sref-active="active"><a ui-sref="base.email"><i class="fa fa-envelope-o"></i> <span class="title">Email</span></a></li><li ui-sref-active="active"><a ui-sref="base.accounts"><i class="fa fa-building-o"></i> <span class="title">Accounts</span></a></li><li ui-sref-active="active"><a ui-sref="base.contacts"><i class="fa fa-user"></i> <span class="title">Contacts</span></a></li><li ui-sref-active="active"><a ui-sref="base.deals"><i class="fa fa-money"></i> <span class="title">Deals</span></a></li><li class="last" ui-sref-active="active"><a ui-sref="base.cases"><i class="fa fa-briefcase"></i> <span class="title">Cases</span></a></li></ul></div>'),a.put("base/directives/checkbox.html",'<label><div class="checker"> <span ng-class="{checked: model}"><input type="checkbox" data-skip-uniform ng-model="model"></span></div><ng-transclude></ng-transclude></label>'),a.put("base/directives/sort_column.html",'<div style="white-space: nowrap;"><ng-transclude></ng-transclude>&nbsp;<span class="pull-right"><i ng-show="sorted == 0" class="fa fa-sort"></i><i ng-show="sorted == 1" class="fa fa-sort-asc"></i><i ng-show="sorted == -1" class="fa fa-sort-desc"></i></span></div>'),a.put("cases/controllers/assignto.html",'<div class="modal-header"><h3 class="modal-title">Assign this case!</h3></div><div class="modal-body"><div class="row"><div class="col-md-12"> <select ng-options="user.id as user.full_name for user in vm.users" ng-model="vm.currentAssigneeId"></select></div></div></div><div class="modal-footer"> <button class="btn btn-primary" ng-click="vm.ok()">OK</button> <button class="btn btn-warning" ng-click="vm.cancel()">Cancel</button></div>'),a.put("cases/controllers/detail.html",'<div class="row"><div class="col-md-6 col-xs-5"><div class="portlet light"><div class="portlet-body"><ul class="list-unstyled summary-list"><li ng-show="::vm.case.account"> <label>Account:</label> <a ui-sref="base.accounts.detail({ id: vm.case.account })">{{ ::vm.case.account_name }}</a></li><li ng-show="::vm.case.contact"> <label>Contact:</label> <a ui-sref="base.contacts.detail({ id: vm.case.contact })">{{ ::vm.case.contact_name }}</a></li><li> <label>Case name:</label> {{ ::vm.case.subject }}</li><li> <label>Created:</label> {{ ::vm.case.created | date:"d MMM y H:ss" }}</li><li ng-show="::vm.case.expires"> <label>Expires:</label> <a ng-click="vm.openPostponeWidget(vm.case)" tooltip="Aaah, that\'s too soon!">{{ vm.case.expires | date:"d MMM y" }}<i class="fa fa-history"></i></a></li><li> <label>Status:</label> {{ vm.case.status }} <span ng-show="vm.case.archived">- Archived</span></li></ul></div></div></div><div class="col-md-6 col-xs-5"><div class="portlet light"><div class="portlet-body"><ul class="list-unstyled summary-list"><li> <label>Case number:</label> {{ ::vm.case.id }}</li><li ng-show="::vm.case.casetype_name"> <label>Type:</label> {{ ::vm.case.casetype_name }}</li><li> <label>Priority:</label> <span class="label label-sm" ng-class="vm.getPriorityDisplay()">{{ vm.case.priority_name }}</span></li><li> <label>Assigned to:</label> <span ng-if="vm.case.assigned_to_id" class="summary-data assigned-to">{{ vm.case.assigned_to_name }}</span> <span ng-if="!vm.case.assigned_to_id" class="summary-data assigned-to">Unassigned</span> <button ng-if="vm.case.assigned_to_id == currentUser.id" ng-click="vm.assignCase()" class="btn btn-link assign-me-btn no-padding">Unassign</button> <button ng-if="vm.case.assigned_to_id != currentUser.id" ng-click="vm.assignCase()" class="btn btn-link assign-me-btn no-padding">Assign to me</button></li><li> <label>Created by:</label> {{ vm.case.created_by || \'Unknown\' }}</li><li ng-show="::vm.case.parcel_identifier"> <label>Parcel:</label> <a href="{{ ::vm.case.parcel_link }}" target="_blank">{{ ::vm.case.parcel_provider }}: {{ ::vm.case.parcel_identifier }}</a></li></ul></div></div></div></div><hr /><div class="row"><div class="col-md-12 summary-info text-center"><div id="case-status" class="btn-group" data-toggle="buttons" data-object-id="{{ ::vm.case.id }}"> <label ng-repeat="status in vm.caseStatuses" for="status-{{ status.id }}" ng-class="{\'btn default\': true, \'btn default active\': vm.case.status == status.status, \'btn default disabled\': vm.case.archived }" ng-click="vm.changeCaseStatus(status.id)"><input class="toggle" type="radio" id="status-{{ status.id }}" name="radio" value="{{ status.id }}" ng-checked="vm.case.status == status.id"> {{ status.status }}</label><div class="btn-group"> <a ng-class="{\'btn default\': true}" ng-click="vm.unarchive(vm.case.id)" ng-show="vm.case.archived">Unarchive</a> <a ng-class="{\'btn default\': vm.case.archived, \'btn default\': !vm.case.archived}" ng-click="vm.archive(vm.case.id)" ng-hide="vm.case.archived">Archive</a></div></div></div></div><hr /><div ng-show="::vm.case.body" class="row no-margin"><div class="well well-md"><h4>Description</h4><p ng-bind-html="vm.case.body | nl2br"></p></div></div><history-list target="\'case\'" object="vm.case"></history-list>'),a.put("cases/controllers/list.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Columns<i class="fa fa-columns"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes"><checkbox model="table.visibility.caseId">No.</checkbox><checkbox model="table.visibility.client">Client</checkbox><checkbox model="table.visibility.subject">Subject</checkbox><checkbox model="table.visibility.priority">Priority</checkbox><checkbox model="table.visibility.type">Type</checkbox><checkbox model="table.visibility.status">Status</checkbox><checkbox model="table.visibility.expires">Expires</checkbox><checkbox model="table.visibility.assignedTo">Assigned to</checkbox><checkbox model="table.visibility.createdBy">Created by</checkbox><checkbox model="table.visibility.tags">Tags</checkbox></div></div> &nbsp;<div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Filter on<i class="fa fa-filter"></i></button> <button class="btn red-pink" ng-click="clearFilters()" ng-show="displayFilterClear"><i class="fa fa-remove"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes list-filters"><div ng-repeat="filter in filterList"><checkbox model="filter.selected" ng-click="updateFilterQuery()">{{filter.name}}</checkbox></div></div></div></div><div class="tools col-xs-12 col-md-6"><form class="form-inline pull-right" action="index.html"><div class="input-group"> <input type="text" class="form-control" ng-model="table.searchQuery" placeholder="Search.."> <span class="input-group-btn"><button class="btn red-pink" ng-click="setSearchQuery(\'\')" ng-disabled="!table.searchQuery"><i class="fa fa-times"></i></button></span></div></form></div></div><div class="portlet-body flip-scroll"><table class="table table-bordered table-striped flip-content"><thead class="flip-content"><th class="list-actions" width="75px"> <span class="text-nowrap">Options</span></th><th ng-show="table.visibility.caseId" sort-column="id" table="table" class="width-4">No.</th><th ng-show="table.visibility.client" class="width-20">Client</th><th ng-show="table.visibility.subject" class="width-20">Subject</th><th ng-show="table.visibility.priority" sort-column="priority" table="table">Priority</th><th ng-show="table.visibility.type" sort-column="casetype_name" table="table">Type</th><th ng-show="table.visibility.status" sort-column="status" table="table">Status</th><th ng-show="table.visibility.expires" sort-column="expires" table="table" class="width-10">Expires</th><th ng-show="table.visibility.assignedTo" sort-column="assigned_to_name" table="table">Assigned to</th><th ng-show="table.visibility.createdBy" sort-column="created_by" table="table">Created by</th><th ng-show="table.visibility.tags">Tags</th></thead><tbody><tr ng-repeat="case in table.items"><td><a ui-sref="base.cases.detail.edit({ id: case.id })" class="btn btn-xs default" title="Edit"><i class="fa fa-edit"></i></a> <button type="button" class="btn btn-xs default" title="Delete" ng-click="delete(case.id, case.subject, case)"><i class="fa fa-trash"></i></button></td><td ng-show="table.visibility.caseId"> {{ ::case.id }}</td><td ng-show="table.visibility.client"> <a ui-sref="base.contacts.detail({ id: case.contact })" ng-if="::case.contact">{{ ::case.contact_name }}</a> <span ng-if="case.contact && case.account">at</span> <a ui-sref="base.accounts.detail({ id: case.account })">{{ ::case.account_name }}</a></td><td ng-show="table.visibility.subject"> <strong ng-if="::case.archived">(a)</strong> <a ui-sref="base.cases.detail({ id: case.id })" title="{{ ::case.subject }}">{{ ::case.subject }}</a></td><td ng-show="table.visibility.priority"><span title="{{ ::case.priority }}"></span> <span class="label label-sm" ng-class="{\'label-success\': !case.priority, \'label-info\': case.priority === 1, \'label-warning\': case.priority === 2, \'label-danger\': case.priority === 3 } ">{{ ::case.priority_name | lowercase }}</span></td><td ng-show="table.visibility.type"> {{ ::case.casetype_name }}</td><td ng-show="table.visibility.status"> {{ ::case.status }}</td><td ng-show="table.visibility.expires"> {{ ::case.expires | relativeDate:\'\':true }}</td><td ng-show="table.visibility.assignedTo"> <span ng-if="case.assigned_to_id">{{ ::case.assigned_to_name }}</span> <a ng-if="!case.assigned_to_id" ng-click="assignTo(case)">Assign case</a></td><td ng-show="table.visibility.createdBy"> {{ ::case.created_by }}</td><td ng-show="table.visibility.tags"> <span ng-repeat="tag in case.tag"><a href="javascript:void(0)" ng-click="setSearchQuery(tag)">{{ ::tag }}</a><br></span></td></tr></tbody></table></div><div class="row"><div class="col-md-7"> Showing {{ (table.page - 1) * table.pageSize }} to {{ table.page * table.pageSize }} of {{ table.totalItems | number }} records</div><div class="col-md-5"><pagination total-items="table.totalItems" ng-model="table.page" items-per-page="table.pageSize" max-size="5"></pagination></div></div></div>'),a.put("cases/controllers/postpone.html",'<div class="modal-header"><h3 class="modal-title">Postpone this case!</h3></div><div class="modal-body"><div class="row"><div class="col-md-12"><p>Booh, can\'t close this case so quickly :( Lets postpone the expiry date</p> <a ng-click="vm.postponeWithDays(1)" class="btn btn-default margin-top-10" ng-hide="vm.expireDate.getDay() == 5">Add 1 day ({{ vm.getFutureDate(1) | date }})</a> <a ng-click="vm.postponeWithDays(2)" class="btn btn-default margin-top-10" ng-hide="vm.expireDate.getDay() == 4">Add 2 days ({{ vm.getFutureDate(2) | date }})</a> <a ng-click="vm.postponeWithDays(3)" class="btn btn-default margin-top-10" ng-show="vm.expireDate.getDay() == 5">Add 3 days ({{ vm.getFutureDate(3) | date }})</a> <a ng-click="vm.postponeWithDays(4)" class="btn btn-default margin-top-10" ng-show="vm.expireDate.getDay() == 4">Add 4 days ({{ vm.getFutureDate(4) | date }})</a> <a ng-click="vm.postponeWithDays(7)" class="btn btn-default margin-top-10">Add 7 days ({{ vm.getFutureDate(7) | date }})</a></div></div><div class="row"><div class="col-md-12 margin-top-10"><p>Lets go crazy:</p><div class="input-group"> <input type="text" class="form-control" ng-model="vm.expireDate" datepicker-popup="{{ vm.dateFormat }}" datepicker-options="vm.datepickerOptions" show-button-bar="false" is-open="vm.pickerIsOpen" date-disabled="vm.disabledDates(date, mode)" date-formatter="{{ vm.dateFormat }}" /> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="vm.openDatePicker($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div>'),a.put("cases/directives/list_widget.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-briefcase"></i> {{ title }}</div><div class="actions"><a ui-sref="{{ addLink || \'base.cases.create\' }}" class="btn btn-circle btn-default"><i class="fa fa-plus"></i> Add</a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: height}"><table class="table table-hover"><thead><tr><th>Priority</th><th>Subject</th><th>Type</th><th>Status</th><th>Expires</th></tr></thead><tbody><tr ng-repeat="case in list" ng-show="list.length"><td>{{ case.priority_name }}</td><td><a ui-sref="base.cases.detail({id: case.id})">{{ case.subject }}</a></td><td>{{ case.casetype_name }}</td><td>{{ case.status }}</td><td>{{ case.expires | date:\'dd MMMM yy\' }}</td></tr><tr ng-hide="list.length"><td colspan="5">No cases</td></tr></tbody></table></div></div></div>'),a.put("contacts/controllers/detail.html",'<div class="row"><div class="col-md-4"><contact-detail-widget contact="contact" height="300"></contact-detail-widget></div><div class="col-md-4"><div ng-repeat="account in contact.accounts" ng-show="contact.accounts.length"><contact-list-widget title="{{ account.name }}" account-id="{{ account.id }}" add-link="base.contacts.create.fromAccount({id: {{ account.id }}})" list="account.colleagueList" ng-if="contact.accounts.length == 1" height="300"></contact-list-widget><contact-list-widget title="{{ account.name }}" account-id="{{ account.id }}" add-link="base.contacts.create.fromAccount({id: {{ account.id }}})" ng-if="contact.accounts.length>= 2" height="91"></contact-list-widget></div><div ng-hide="contact.accounts.length"><contact-list-widget title="Not linked to an account yet..." list="" height="300"></contact-list-widget></div></div><div class="col-md-4"><case-list-widget title="Cases" list="caseList" height="300" add-link="base.cases.create.fromContact({id: {{ contact.id }}})"></case-list-widget></div></div><history-list target="\'contact\'" object="contact"></history-list>'),a.put("contacts/controllers/list.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Columns<i class="fa fa-columns"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes"><checkbox model="table.visibility.name">Name</checkbox><checkbox model="table.visibility.contactInformation">Contact information</checkbox><checkbox model="table.visibility.worksAt">Works at</checkbox><checkbox model="table.visibility.created">Created</checkbox><checkbox model="table.visibility.modified">Modified</checkbox><checkbox model="table.visibility.tags">Tags</checkbox></div></div> <a ng-click="exportToCsv()" class="btn btn-default">Export contacts</a></div><div class="tools col-xs-12 col-md-6"><form class="form-inline pull-right" action="index.html"><div class="input-group"> <input type="text" class="form-control" ng-model="table.filter" placeholder="Search.."> <span class="input-group-btn"><button class="btn red-pink" ng-click="setFilter(\'\')" ng-disabled="!table.filter"><i class="fa fa-times"></i></button></span></div></form></div></div><div class="portlet-body flip-scroll"><table class="table table-bordered table-striped flip-content"><thead class="flip-content"><tr><th class="list-actions" width="75px"> <span class="text-nowrap">Options</span></th><th ng-show="table.visibility.name" sort-column="last_name" table="table" class="width-22"> <span class="text-nowrap">Name</span></th><th ng-show="table.visibility.contactInformation" class="width-22"> <span class="text-nowrap">Contact information</span></th><th ng-show="table.visibility.worksAt" sort-column="account" table="table" class="width-22"> <span class="text-nowrap">Works at</span></th><th ng-show="table.visibility.created" sort-column="created" table="table" class="width-10"> <span class="text-nowrap">Created</span></th><th ng-show="table.visibility.modified" sort-column="modified" table="table" class="width-10"> <span class="text-nowrap">Modified</span></th><th ng-show="table.visibility.tags"> <span class="text-nowrap">Tags</span></th></tr></thead><tbody><tr ng-repeat="contact in table.items"><td><a ui-sref="base.contacts.detail.edit({ id: contact.id })" class="btn btn-xs default" title="Edit"><i class="fa fa-edit"></i></a> <button type="button" class="btn btn-xs default" title="Delete" ng-click="deleteContact(contact)"><i class="fa fa-trash"></i></button></td><td ng-show="table.visibility.name"> <a ui-sref="base.contacts.detail({ id: contact.id })" title="{{ ::contact.name }}">{{ ::contact.name }}</a></td><td ng-show="table.visibility.contactInformation"><div ng-repeat="email in contact.email_addresses | filter: {status: \'!\'+ 0}"><a ui-sref="base.email.composeEmail({ email: email.email_address })" title="{{ ::email.email_address }}"><i class="fa fa-envelope-alt"></i> {{ email.email_address }}</a></div><div ng-repeat="phone in contact.phone_work track by $index"><a href="tel:{{ ::phone }}"><i class="fa fa-phone"></i> {{ phone }}</a></div><div ng-repeat="phone in contact.phone_mobile track by $index"><a href="tel:{{ ::phone }}"><i class="fa fa-mobile-phone"></i> {{ phone }}</a></div></td><td ng-show="table.visibility.worksAt"><div ng-repeat="account in contact.accounts"> <a ui-sref="base.accounts.detail({id: account.id})">{{ account.name }}</a></div></td><td ng-show="table.visibility.created"> {{ ::contact.created | relativeDate }}</td><td ng-show="table.visibility.modified"> {{ ::contact.modified | relativeDate }}</td><td ng-show="table.visibility.tags"> <span ng-repeat="tag in contact.tag"><a href="javascript:void(0)" ng-click="setFilter(tag)">{{ ::tag }}</a><br></span></td></tr></tbody></table></div><div class="row"><div class="col-md-7"> Showing {{ (table.page - 1) * table.pageSize }} to {{ table.page * table.pageSize }} of {{ table.totalItems | number }} records</div><div class="col-md-5"><pagination total-items="table.totalItems" ng-model="table.page" items-per-page="table.pageSize" max-size="5"></pagination></div></div></div>'),a.put("contacts/directives/detail_widget.html",'<div class=\'portlet light\'><div class="portlet-title"><div class="caption"><i class="fa fa-building-o"></i> {{ contact.salutation }} / {{ contact.gender }} <b>{{ contact.name }}</b></div></div><div class="portlet-body"><div><div class="scroll-body" slimscroll="{height: height/2}"><p style="white-space: pre-line">{{ contact.description || \'No description\' }}</p></div></div><div class="scroll-body" slimscroll="{height: height/2}"><table class="table table-hover no-margin"><tr ng-show="(contact.email_addresses | filter: {status: \'!\' + 0}).length"><th> <i class="fa">@</i> Email</th><td><div ng-repeat="email in contact.email_addresses | filter: {status: \'!\' + 0}"> <a ui-sref="base.email.composeEmail({email: email.email_address})">{{ email.email_address }}</a></div></td></tr><tr ng-show="contact.phones"><th><i class="fa fa-phone"></i> Phone</th><td><div ng-repeat="phone in contact.phones"> {{ phone }}</div></td></tr><tr ng-show="contact.addresses"><th><i class="fa fa-map-marker"></i> Address</th><td><div ng-repeat="address in contact.addresses"> {{ address.street }} {{ address.street_number }}{{ address.complement }}, {{ address.postal_code }}<br /> {{ address.city }}, {{ address.country }}<br /></div></td></tr><tr ng-show="contact.social" ng-repeat="social in contact.social"><th><i class="fa fa-{{ social.social_name | lowercase }}"></i> {{ social.social_name }}</th><td><a ng-href="{{ social.social_url }}" target="_blank">{{ social.social_profile }}</a></td></tr><tr ng-show="contact.tag"><th><i class="fa fa-tag"></i> Tags</th><td> <a class="btn btn-xs btn-default" ng-repeat="tag in contact.tag">{{ tag }}</a></td></tr></table></div></div></div>'),a.put("contacts/directives/list_widget.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-users"></i> <span ng-show="accountId">Colleagues at <a ui-sref="base.accounts.detail({id: accountId })">{{ title }}</a></span> <span ng-hide="accountId">{{ title }}</span></div><div class="actions"><a ui-sref="{{ addLink || \'base.contacts.create\' }}" class="btn btn-circle btn-default"><i class="fa fa-plus"></i> Add</a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: height || 250}"><table class="table table-hover"><thead><tr><th>Name</th><th>E-mail address</th><th>Phone number</th></tr></thead><tbody><tr ng-repeat="contact in list" ng-show="list.length"><td><a ui-sref="base.contacts.detail({id: contact.id})">{{ contact.name }}</a></td><td> <a ui-sref="base.email.composeEmail({email: contact.email_addresses[0].email_address})" ng-show="contact.email_addresses[0]">{{ contact.email_addresses[0].email_address }}</a> <span ng-hide="contact.email_addresses[0]">No email</span></td><td>{{ contact.phones[0] || \'No phone\' }}</td></tr><tr ng-hide="list.length"><td colspan="4">No contacts</td></tr></tbody></table></div></div></div>'),a.put("dashboard/controllers/base.html",'<div class="row"><callback-requests></callback-requests><my-cases></my-cases><unread-email></unread-email><teams></teams><deals-to-check></deals-to-check><feedback></feedback><follow-up></follow-up></div>'),a.put("dashboard/directives/callback.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-phone"></i> <span class="caption-subject bold uppercase">CALLBACK REQUESTS</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th>Account</th><th>Contact</th><th>Phonenumber</th><th>Subject</th><th sort-column="created" table="vm.table">Created</th></tr></thead><tbody><tr ng-repeat="case in vm.table.items"><td><a ui-sref="base.accounts.detail({ id: case.account })">{{ case.account_name }}</a></td><td><a ui-sref="base.contacts.detail({ id: case.contact })">{{ case.contact_name }}</a></td><td><div ng-show="case.accountPhone"><i class="fa fa-building"></i> {{ case.accountPhone }}</div><div ng-show="case.contactPhone"><i class="fa fa-user"></i> {{ case.contactPhone }}</div></td><td><a ui-sref="base.cases.detail({ id: case.id })">{{ case.subject }}</a></td><td>{{ case.created | relativeDate }}</td></tr><tr ng-hide="vm.table.items.length"><td colspan="5">Callback requests</td></tr></tbody></table></div></div></div></div>'),a.put("dashboard/directives/dealstocheck.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-phone"></i> <span class="caption-subject bold uppercase">DEALS TO CHECK</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div><div class="actions"> <select class="form-control input-sm xsm" ng-options="user.id as user.first_name for user in vm.users" ng-model="vm.table.selectedUserId"></select></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th>Account</th><th>Deal</th><th sort-column="closing_date" table="vm.table">Won date</th><th>Quote</th><th>Checked?</th></tr></thead><tbody><tr ng-repeat="deal in vm.table.items"><td><a ui-sref="base.accounts.detail({ id: deal.account })">{{ deal.account_name }}</a></td><td><a ui-sref="base.deals.detail({ id: deal.id })">{{ deal.name }}</a></td><td>{{ deal.closing_date | relativeDate }}</td><td><a ng-href="https://freedom.voys.nl/quotes/pdf/{{ deal.quote_id }}/"><i class="fa fa-dashboard"></i> Check</a></td><td><a ng-click="vm.markDealAsChecked(deal)"><i class="fa fa-check"></i> a ok!</a></td></tr><tr ng-hide="vm.table.items.length"><td colspan="5">No deals to check</td></tr></tbody></table></div></div></div></div>'),
a.put("dashboard/directives/feedback.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-phone"></i> <span class="caption-subject bold uppercase">FEEDBACK</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th>Account</th><th sort-column="closing_date" table="vm.table">Won date</th><th>Usage</th><th>Send feedback</th><th>Check after send</th></tr></thead><tbody><tr ng-repeat="deal in vm.table.items"><td><a ui-sref="base.accounts.detail({ id: deal.account })">{{ deal.account_name }}</a></td><td>{{ deal.closing_date | relativeDate }}</td><td ng-show="deal.quote_id"><a ng-href="https://freedom.voys.nl/quotes/pdf/{{ deal.quote_id }}/"><i class="fa fa-dashboard"></i> Check</a></td><td ng-hide="deal.quote_id"><i>No quote id registered</i></td><td><a ng-click="vm.openFeedbackForm(deal)" class="btn btn-sm btn-default"><i class="fa fa-bullhorn"></i> Feedback form</a></td><td><a ng-click="vm.feedbackFormSentForDeal(deal)"><i class="fa fa-check"></i> a ok!</a></td></tr><tr ng-hide="vm.table.items.length"><td colspan="5">No deals to check</td></tr></tbody></table></div></div></div></div>'),a.put("dashboard/directives/followup.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-bell"></i> <span class="caption-subject bold uppercase">FOLLOW UP</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-tile="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th sort-column="account" table="vm.table">Account</th><th sort-column="name" table="vm.table">Deal</th><th sort-column="created" table="vm.table">Date</th><th>Monthly</th><th sort-column="stage_name" table="vm.table">Status</th><th>Edit</th></tr></thead><tbody><tr ng-repeat="followUp in vm.table.items"><td><a ui-sref="base.accounts.detail({ id: followUp.account })">{{ followUp.account_name }}</a></td><td><a ui-sref="base.deals.detail({ id: followUp.id })">{{ followUp.name }}</a></td><td>{{ followUp.created|date }}</td><td>{{ followUp.amount_recurring | currency:"€" }}</td><td>{{ followUp.stage_name }}</td><td><a ng-click="vm.openFollowUpWidgetModal(followUp)"><i class="fa fa-edit"></i> Edit</a></td></tr><tr ng-hide="vm.table.items.length"><td colspan="6">No follow up deals</td></tr></tbody></table></div></div></div></div>'),a.put("dashboard/directives/mycases.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-briefcase"></i> <span class="caption-subject bold uppercase">MY CASES</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th sort-column="id" table="vm.table">Case nr.</th><th>Client</th><th>Subject</th><th sort-column="priority" table="vm.table">Prio</th><th>Status</th><th sort-column="expires" table="vm.table">Exp date</th></tr></thead><tbody><tr ng-repeat="myCase in vm.table.items"><td><a ui-sref="base.cases.detail({ id: myCase.id })">{{ myCase.id }}</a></td><td><a ui-sref="base.accounts.detail({ id: myCase.account })">{{ myCase.account_name }}</a></td><td><a ui-sref="base.cases.detail({ id: myCase.id })">{{ myCase.subject }}</a></td><td><span title="3"></span> <span class="label label-sm ng-binding" ng-class="{0: \'label-success\', 1: \'label-info\', 2: \'label-warning\', 3: \'label-danger\'}[myCase.priority]">{{ myCase.priority_name }}</span></td><td>{{ myCase.status }}</td><td><a ng-click="vm.openPostponeWidget(myCase)" tooltip="Aaah, that\'s too soon!"><i class="fa fa-history"></i> {{ myCase.expires | date }}</a></td></tr><tr ng-hide="vm.table.items.length"><td colspan="6">No cases</td></tr></tbody></table></div></div></div></div>'),a.put("dashboard/directives/queuesize.html",'<div class="col-md-6" ng-show="show"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-envelope-o"></i> <span class="caption-subject bold uppercase">Queue Size of {{ queueName }}</span> <span class="caption-helper">(Total Size: {{ totalSize | number }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><canvas id="line" class="chart chart-line" data="data" labels="labels" legend="true" series="series" options="options"></canvas></div></div></div>'),a.put("dashboard/directives/teams.html",'<div class="col-md-6" ng-repeat="team in vm.teams"><unassigned-cases team="team"></unassigned-cases></div>'),a.put("dashboard/directives/unassignedcases.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-suitcase"></i> <span class="caption-subject bold uppercase">{{vm.team.name | uppercase}} CASES</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th sort-column="id" table="vm.table">Casenr.</th><th>Client</th><th>Subject</th><th sort-column="priority" table="vm.table">Prio</th><th sort-column="created" table="vm.table">Created</th><th></th></tr></thead><tbody><tr ng-hide="vm.table.items.length"><td colspan="6">There are no unassigned cases for this team...</td></tr><tr ng-repeat="case in vm.table.items"><td><a ui-sref="base.cases.detail({ id: case.id })">{{ case.id }}</a></td><td><a ui-sref="base.accounts.detail({ id: case.account })" ng-if="::case.account">{{ ::case.account_name }}</a></td><td><a ui-sref="base.cases.detail({ id: case.id })" title="{{ ::case.subject }}">{{ ::case.subject }}</a></td><td> <span class="label label-sm" ng-class="{0: \'label-success\', 1: \'label-info\', 2: \'label-warning\', 3: \'label-danger\'}[case.priority]">{{ case.priority_name }}</span></td><td>{{ case.created | relativeDate }}</td><td><a ng-click="vm.assignToMe(case)"><i class="fa fa-anchor"></i> Me me me</a></td></tr></tbody></table></div></div></div>'),a.put("dashboard/directives/unreademail.html",'<div class="col-md-6"><div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-envelope-o"></i> <span class="caption-subject bold uppercase">UNREAD E-MAIL</span> <span class="caption-helper">({{ vm.table.items.length }})</span></div><div class="tools"><a href="" class="collapse" data-original-title="" title=""></a><a href="" class="remove" data-original-title="" title=""></a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: 250}"><table class="table table-hover"><thead><tr><th sort-column="account_name" table="vm.table">Mailbox</th><th>From</th><th>Subject</th><th sort-column="sent_date" table="vm.table">Created</th><th width="105px">Actions</th></tr></thead><tbody><tr ng-repeat="message in vm.table.items"><td>{{ message.account_name }}</td><td>{{ message.sender_name || message.sender_email }}</td><td><div>{{ message.subject }}</div><br><div><em>{{ message.snippet }}</em></div></td><td>{{ message.sent_date | relativeDate }}</td><td><div><a ui-sref="base.email.reply({id: message.id})"><i class="fa fa-reply"></i> reply</a></div><div><a ui-sref="base.email.detail({id: message.id})"><i class="fa fa-eye"></i> view</a></div><div><i class="fa fa-sitemap"></i> create</div></td></tr><tr ng-hide="vm.table.items.length"><td colspan="5">No unread emailmessages</td></tr></tbody></table></div></div></div></div>'),a.put("deals/controllers/detail.html",'<div class="row"><div class="col-md-6"><div class="portlet light"><div class="portlet-body"><div class="row"><div class="col-md-12"> <label>Account:</label> <a ui-sref="base.accounts.detail({ id: deal.account })">{{ ::deal.account_name }}</a><br/> <label>Deal Name:</label> {{ ::deal.name }}<br/> <label>Created:</label> {{ deal.created | relativeDate }}<br/> <label>Closing Date:</label> <span id="closed-date" ng-show="deal.closing_date">{{ deal.closing_date | relativeDate }}</span></div></div></div></div></div><div class="col-md-6"><div class="portlet light"><div class="portlet-body"><div class="row"><div class="col-md-12"> <label>Assigned to:</label> {{ ::deal.assigned_to_name }}<br/> <label>One-time cost:</label> {{ ::deal.amount_once | currency:"€" }}<br/> <label>Recurring costs:</label> {{ ::deal.amount_recurring | currency:"€" }}<br/> <label>Status:</label> {{ deal.stage_name }} <span ng-show="deal.archived">- Archived</span><br/><div ng-show="deal.stage == 2"> <label>Checked:</label><span ng-show="deal.is_checked"><i class="fa fa-checked"></i> Yes</span> <span ng-hide="deal.is_checked"><a href="javascript:void(0);">Nope :-(</a></span><br/></div><div ng-show="deal.quote_id"> <label>Freedom quote:</label> <a ng-href="https://freedom.voys.nl/quotes/pdf/{{ deal.quote_id }}/">Open in freedom</a></div> <label>Feedback form sent:</label> {{ ::deal.feedback_form_sent }}<br/></div></div></div></div></div></div><hr /><div class="row"><div class="col-md-12 summary-info text-center"><div id="deal-stage" class="btn-group" data-toggle="buttons" data-object-id="{{ ::deal.id }}"> <label ng-repeat="stage in dealStages" for="stage-{{ ::stage[1] | lowercase }}" ng-class="{\'btn default\': true, \'btn default active\': deal.stage == stage[0], \'btn default disabled\': deal.archived }" ng-click="changeState(stage[0])"><input class="toggle" type="radio" id="stage-{{ ::stage[1] | lowercase }}" name="radio" value="{{ ::stage[0] }}" ng-checked="deal.stage == stage[0]"> {{ ::stage[1] }}</label><div class="btn-group"> <a ng-class="{\'btn default\': true}" ng-click="unarchive(deal.id)" ng-show="deal.archived">Unarchive</a> <a ng-class="{\'btn default\': deal.archived, \'btn default\': !deal.archived}" ng-click="archive(deal.id)" ng-hide="deal.archived">Archive</a></div></div></div></div></div><hr /><div class="row no-margin" ng-show="::deal.body"><div class="well well-md"><h4>Description</h4><p ng-bind-html="deal.body | nl2br"></p></div></div><history-list target="\'deal\'" object="deal"></history-list>'),a.put("deals/controllers/followup_widget.html",'<div class="modal-header"><h3 class="modal-title">Haha, you follow up. You rock!</h3></div><div class="modal-body form-horizontal"><div class="row"><div class="col-md-12"><div class="form-group"> <label class="control-label col-sm-3" for="id_stage">Status</label><div class="col-sm-9"><ui-select ng-model="vm.selectedStage" theme="select2" class="form-control"><ui-select-match placeholder="Select or search a status in the list...">{{ $select.selected.name }}</ui-select-match><ui-select-choices repeat="stage in vm.dealStages | filter: {name: $select.search}"><div ng-bind-html="stage.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"> <label class="control-label col-sm-3" for="closing_date">Closing date</label><div class="col-sm-9"><div class="input-group"> <input type="text" class="form-control" ng-model="vm.closingDate" datepicker-options="vm.datepickerOptions" datepicker-popup="{{ vm.dateFormat }}" show-button-bar="false" date-formatter="{{ vm.dateFormat }}" is-open="vm.pickerIsOpen" id="closing_date" ng-click="vm.openDatePicker($event)" /> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="vm.openDatePicker($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div></div><div class="modal-footer"> <button class="btn green" ng-click="vm.saveModal()">Update</button> <button class="btn" ng-click="vm.closeModal()">Close</button></div>'),a.put("deals/controllers/list.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Columns<i class="fa fa-columns"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes"><checkbox model="table.visibility.account">Account</checkbox><checkbox model="table.visibility.stage">Stage</checkbox><checkbox model="table.visibility.created">Created</checkbox><checkbox model="table.visibility.name">Subject</checkbox><checkbox model="table.visibility.amountOnce">One-time cost</checkbox><checkbox model="table.visibility.amountRecurring">Recurring costs</checkbox><checkbox model="table.visibility.assignedTo">Assigned to</checkbox><checkbox model="table.visibility.closingDate">Closing date</checkbox><checkbox model="table.visibility.newBusiness">New business</checkbox><checkbox model="table.visibility.feedbackFormSent">Feedback form sent</checkbox><checkbox model="table.visibility.tags">Tags</checkbox></div></div> &nbsp;<div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i> Filter on<i class="fa fa-filter"></i></button> <button class="btn red-pink" ng-click="clearFilters()" ng-show="displayFilterClear"><i class="fa fa-remove"></i></button><div class="dropdown-menu hold-on-click dropdown-checkboxes list-filters"><div ng-repeat="filter in filterList"><checkbox model="filter.selected" ng-click="updateFilterQuery()">{{filter.name}}</checkbox></div></div></div></div><div class="tools col-xs-12 col-md-6"><form class="form-inline pull-right" action="index.html"><div class="input-group"> <input type="text" class="form-control" ng-model="table.searchQuery" placeholder="Search.."> <span class="input-group-btn"><button class="btn red-pink" ng-click="setSearchQuery(\'\')" ng-disabled="!table.searchQuery"><i class="fa fa-times"></i></button></span></div></form></div></div><div class="portlet-body flip-scroll"><table class="table table-bordered table-striped flip-content"><thead class="flip-content"><th class="list-actions" width="75px"> <span class="text-nowrap">Options</span></th><th ng-show="table.visibility.account" class="width-10">Account</th><th ng-show="table.visibility.stage" sort-column="stage" table="table">Stage</th><th ng-show="table.visibility.created" sort-column="created" table="table" class="width-10">Created</th><th ng-show="table.visibility.name" table="table" class="width-20">Subject</th><th ng-show="table.visibility.amountOnce" sort-column="amount_once" table="table">One-time cost</th><th ng-show="table.visibility.amountRecurring" sort-column="amount_recurring" table="table">Recurring costs</th><th ng-show="table.visibility.assignedTo" sort-column="assigned_to_name" table="table">Assigned to</th><th ng-show="table.visibility.closingDate" sort-column="closing_date" table="table" class="width-10">Closing date</th><th ng-show="table.visibility.newBusiness" sort-column="new_business" table="table">New business</th><th ng-show="table.visibility.feedbackFormSent" sort-column="feedback_form_sent" table="table">Feedback form sent</th><th ng-show="table.visibility.tags">Tags</th></thead><tbody><tr ng-repeat="deal in table.items"><td><a ui-sref="base.deals.detail.edit({ id: deal.id })" class="btn btn-xs default" title="Edit"><i class="fa fa-edit"></i></a> <button type="button" class="btn btn-xs default" title="Delete" ng-click="delete(deal.id, deal.name, deal)"><i class="fa fa-trash"></i></button></td><td ng-show="table.visibility.account"> <a ui-sref="base.accounts.detail({ id: deal.account })">{{ deal.account_name }}</a></td><td ng-show="table.visibility.stage"> {{ deal.stage_name }}</td><td ng-show="table.visibility.created"> {{ deal.created | relativeDate }}</td><td ng-show="table.visibility.name"> <a ui-sref="base.deals.detail({ id: deal.id })" title="{{ deal.name }}">{{ deal.name }}</a></td><td ng-show="table.visibility.amountOnce"> {{ deal.amount_once |currency:\'&euro; \' }}</td><td ng-show="table.visibility.amountRecurring"> {{ deal.amount_recurring |currency:\'&euro; \' }}</td><td ng-show="table.visibility.assignedTo"> {{ deal.assigned_to_name }}</td><td ng-show="table.visibility.closingDate"> {{ deal.closing_date | relativeDate }}</td><td ng-show="table.visibility.newBusiness"> <span ng-if="deal.new_business">Yes</span> <span ng-if="!deal.new_business">No</span></td><td ng-show="table.visibility.feedbackFormSent"> <span ng-if="deal.feedback_form_sent"><i class="fa fa-check text-success font-size-inherit">Done</i></span> <span ng-if="!deal.feedback_form_sent"><i class="fa fa-remove text-warning font-size-inherit">Not yet</i></span></td><td ng-show="table.visibility.tags"> <span ng-repeat="tag in deal.tag"><a href="javascript:void(0)" ng-click="setSearchQuery(tag)">{{ tag }}</a><br></span></td></tr></tbody></table></div><div class="row"><div class="col-md-7"> Showing {{ (table.page - 1) * table.pageSize }} to {{ table.page * table.pageSize }} of {{ table.totalItems | number }} records</div><div class="col-md-5"><pagination total-items="table.totalItems" ng-model="table.page" items-per-page="table.pageSize" max-size="5"></pagination></div></div></div>'),a.put("deals/directives/list_widget.html",'<div class="portlet light"><div class="portlet-title"><div class="caption"><i class="fa fa-money"></i> {{ title }}</div><div class="actions"><a ui-sref="{{ addLink || \'base.deals.create\' }}" class="btn btn-circle btn-default"><i class="fa fa-plus"></i> Add</a></div></div><div class="portlet-body"><div class="scroll-body" slimscroll="{height: height}"><table class="table table-hover"><thead><tr><th>Stage</th><th>Subject</th><th>Created</th><th>Costs</th><th>Closes</th></tr></thead><tbody><tr ng-repeat="deal in list" ng-show="list.length"><td>{{ deal.stage_name }}</td><td><a ui-sref="base.deals.detail({id: deal.id})">{{ deal.name }}</a></td><td>{{ deal.created | date:\'dd MMMM yy\' }}</td><td>&euro;{{ deal.amount_once }} + &euro;{{ deal.amount_recurring }}/m</td><td>{{ deal.closing_date | date:\'dd MMMM yy\' }}</td></tr><tr ng-hide="list.length"><td colspan="5">No Deals</td></tr></tbody></table></div></div></div>'),a.put("email/controllers/base.html",'<div class="portlet light"><div class="portlet-body"><div class="row inbox"><div class="col-md-2" ui-view="labelList"></div><div class="col-md-10" ui-view></div></div></div></div>'),a.put("email/controllers/detail.html",'<div class="inbox-header inbox-view-header"><h1 class="pull-left">{{ vm.message.subject}}</h1></div><div class="inbox-view-info"><div class="row"><div class="email-info-top"> <span class="bold">{{ vm.message.sender.name }}</span>&nbsp;<span>&lt;{{ vm.message.sender.email_address }}&gt;</span><div class="pull-right"> <span class="bold"><abbr title="{{ vm.message.sent_date | relativeDate }}">{{ vm.message.sent_date | relativeDate }}</abbr></span><div class="inbox-info-btn"><div class="btn-group"><a ui-sref="base.email.reply({ id: vm.message.id })" class="btn blue reply-btn"><i class="fa fa-mail-reply"></i> Reply</a> <button class="btn blue dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-down"></i></button><ul class="dropdown-menu pull-right"><li><a ui-sref="base.email.replyAll({ id: vm.message.id })"><i class="fa fa-reply-all reply-btn"></i> Reply all</a></li><li><a ui-sref="base.email.forward({ id: vm.message.id })"><i class="fa fa-mail-forward reply-btn"></i> Forward</a></li><li class="divider"></li><li><a ng-click="vm.markAsUnread()"><i class="fa fa-envelope reply-btn"></i> Mark as unread</a></li><li><a href="#"><i class="fa fa-ban"></i> Spam</a></li></ul></div><div class="btn-group"><a class="btn blue" ng-click="vm.trashMessage()"><i class="fa fa-trash-o"></i> Delete</a><a class="btn blue" ng-click="vm.archiveMessage()"><i class="fa fa-archive"></i> Archive</a></div></div></div></div><div class="email-recipients-wrapper"><div class="email-recipients" ng-class="{\'overlay\': !vm.displayAllRecipients}" ng-show="vm.message.received_by.length"> <span>to</span> <span ng-repeat="receiver in vm.message.all_recipients"><span ng-if="receiver.name"><span ng-if="receiver.contact_id"><a ui-sref="base.contacts.detail({ id: receiver.contact_id })">{{ receiver.name }}</a></span> <span ng-if="!receiver.contact_id">{{ receiver.name }}</span><{{ receiver.email_address }}><span ng-if="!$last">,</span></span> <span ng-if="!receiver.name"><span>{{ receiver.email_address }}</span><span ng-if="!$last">,</span></span></span></div> <button class="btn show-more-recipients" ng-click="vm.toggleOverlay()"><i class="fa" ng-class="{true: \'fa-caret-square-o-up\', false: \'fa-caret-square-o-down\'}[vm.displayAllRecipients]"></i></button></div></div></div><div class="inbox-view" ng-show="vm.message.body_html" id="ifrm_container"><iframe resize-iframe ng-src="{{ vm.message.bodyHTMLUrl | trustAsResourceUrl }}" class="col-xs-12 col-md-12 hidden" frameBorder="0"></iframe></div><div class="inbox-view" ng-hide="vm.message.body_html" ng-bind-html="vm.message.body_text | nl2br"></div><hr><div class="inbox-attached" ng-show="vm.message.attachments.length"><div class="margin-bottom-25" ng-repeat="attachment in vm.message.attachments"><div> <strong>{{ attachment.attachment }}</strong> <span>{{ attachment.size / 1024 | number: 0}} KB</span> <a href="/messaging/email/attachment/{{ attachment.id }}/">Download</a></div></div></div>'),a.put("email/controllers/email_list.html",'<div class="inbox-header"><h1 class="pull-left" ng-show="vm.table.filter">Search: {{ vm.table.filter }}</h1><h1 class="pull-left" ng-hide="vm.table.filter"> <span ng-show="vm.account">{{ vm.account.email_address }}</span> <span ng-hide="vm.account">All mailboxes</span> <span ng-show="vm.label.name">- {{ vm.label.name }}</span> <span ng-hide="vm.label">- All mail</span></h1><form class="form-inline pull-right"><div class="input-group input-medium"> <input type="text" class="form-control" placeholder="Search" ng-model="vm.table.filter"> <span class="input-group-btn"><button type="submit" class="btn green"><i class="fa fa-search"></i></button></span></div></form></div><div class="inbox-content"><table class="table table-striped table-advance table-hover"><thead><tr><th colspan="6"><checkbox model="vm.opts.checkboxesAll" ng-click="vm.toggleCheckboxes()"></checkbox><div class="btn-group"><span class="pull-left" ng-if="::vm.account"><a class="btn btn-sm blue dropdown-toggle" href="javascript:void(0)" data-toggle="dropdown"><i class="fa fa-folder"></i> Move to<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu labels"><li class="inbox" ng-hide="vm.label.label_id == \'INBOX\'"> <a href="javascript:void(0)" class="btn" ng-click="vm.moveMessages(\'INBOX\')">Inbox</a></li><li class="spam" ng-hide="vm.label.label_id == \'SPAM\'"> <a href="javascript:void(0)" class="btn" ng-click="vm.moveMessages(\'SPAM\')">Spam</a></li><li ng-repeat="accountLabel in vm.account.labels" class="inbox" ng-if="accountLabel.label_type != 0 && accountLabel.label_id != vm.label.label_id"> <a href="javascript:void(0)" class="btn" ng-click="vm.moveMessages(accountLabel.label_id)">{{ accountLabel.name }}</a></li></ul></span></div><div class="btn-group"> <a class="btn btn-sm blue dropdown-toggle" href="javascript:void(0)" data-toggle="dropdown">More<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu"><li><a ng-click="vm.markAsRead()"><i class="fa fa-pencil"></i> Mark as read</a></li><li><a ng-click="vm.markAsUnread()"><i class="fa fa-pencil"></i> Mark as unread</a></li><li><a ng-show="vm.showReplyOrForwardButtons()" ng-click="vm.replyOnMessage()"><i class="fa fa-mail-reply"></i> Reply</a></li><li><a ng-show="vm.showReplyOrForwardButtons()" ng-click="vm.replyAllOnMessage()"><i class="fa fa-mail-reply-all"></i> Reply all</a></li><li><a ng-show="vm.showReplyOrForwardButtons()" ng-click="vm.forwardOnMessage()"><i class="fa fa-mail-forward"></i> Forward</a></li><li><a href="#"><i class="fa fa-ban"></i> Spam</a></li></ul></div><a class="btn btn-sm red" ng-click="vm.deleteMessages()"><i class="fa fa-trash-o"></i> Delete</a><a class="btn btn-sm blue" ng-click="vm.archiveMessages()" ng-show="vm.label"><i class="fa fa-archive"></i> Archive</a><a class="btn btn-sm blue" ng-click="vm.reloadMessages()"><i class="fa fa-refresh"></i> Refresh</a><div class="pagination-control pull-right"> <span class="pagination-info">{{ vm.table.page * vm.table.pageSize + 1}}-{{ [(vm.table.page + 1) * vm.table.pageSize, vm.table.totalItems] | minValue }} of {{ vm.table.totalItems | number }}</span><a class="btn btn-sm blue" ng-click="vm.setPage(vm.table.page - 1)"><i class="fa fa-angle-left"></i></a><a class="btn btn-sm blue" ng-click="vm.setPage(vm.table.page + 1)"><i class="fa fa-angle-right"></i></a></div></th></tr></thead><tbody><tr ng-repeat="message in vm.emailMessages" style="cursor: pointer;" ng-class="{\'unread\': !message.read}"><td class="inbox-small-cells"><checkbox model="message.checked"></checkbox></td><td contact-icon message="message"></td><td class="view-message hidden-xs" ng-show="vm.label.name != \'Sent\' && vm.label.name != \'Draft\'" ui-sref="base.email.detail({id: message.id})"> <span ng-show="message.sender_name" title="{{ message.sender_email }}">{{ message.sender_name }}</span> <span ng-hide="message.sender_name">{{ message.sender_email }}</span></td><td class="view-message hidden-xs" ng-show="vm.label.name == \'Sent\'" ui-sref="base.email.detail({id: message.id})"> <span ng-show="message.received_by_name">{{ message.received_by_name.join(\', \') }}</span> <span ng-hide="message.received_by_name">{{ message.received_by_email.join(\', \') }}</span></td><td class="view-message hidden-xs" ng-show="vm.label.name == \'Draft\'" ui-sref="base.email.draft({id: message.id})"> {{ message.received_by_email.join(\',\') }}</td><td class="view-message" ng-if="vm.label.name == \'Draft\'" ui-sref="base.email.draft({id: message.id})"> {{ message.subject }}</td><td class="view-message" ng-if="vm.label.name != \'Draft\'" ui-sref="base.email.detail({id: message.id})"> {{ message.subject }}</td><td class="view-message inbox-small-cells" ui-sref="base.email.detail({id: message.id})"><i class="fa fa-paperclip" ng-if="message.has_attachment"></i></td><td class="view-message text-right text-nowrap" ui-sref="base.email.detail({id: message.id})"> {{ message.sent_date | relativeDate }}</td></tr></tbody></table></div>'),a.put("email/controllers/label_list.html",'<ul class="inbox-nav margin-bottom-10"><li class="compose-btn" ui-sref-active="active"><a ui-sref="base.email.compose" data-title="Compose" class="btn green"><i class="fa fa-edit"></i> Compose</a><b></b></li><li class="mailbox-header"> <span>All Mailboxes</span></li><li class="inbox" ui-sref-active="active"> <a class="btn" ui-sref="base.email.list({labelId:\'INBOX\'})">Inbox <span ng-if="vm.labelCount[\'INBOX\']">({{ vm.labelCount[\'INBOX\'] }})</span></a><b></b></li><li class="sent" ui-sref-active="active"> <a class="btn" ui-sref="base.email.list({labelId:\'SENT\'})">Sent <span ng-if="vm.labelCount[\'SENT\']">({{ vm.labelCount[\'SENT\'] }})</span></a><b></b></li><li class="draft" ui-sref-active="active"> <a class="btn" ui-sref="base.email.list({labelId:\'DRAFT\'})">Draft <span ng-if="vm.labelCount[\'DRAFT\']">({{ vm.labelCount[\'DRAFT\'] }})</span></a><b></b></li><li class="trash" ui-sref-active="active"> <a class="btn" ui-sref="base.email.list({labelId:\'TRASH\'})">Trash <span ng-if="vm.labelCount[\'TRASH\']">({{ vm.labelCount[\'TRASH\'] }})</span></a><b></b></li><li class="allmail"> <a class="btn" ui-sref="base.email.list({labelId:\'\'})">All mail</a><b></b></li></ul><ul class="inbox-nav margin-bottom-10" ng-repeat="account in vm.accountList"><li class="mailbox-header"><span><i class="fa fa-star" ng-show="account.id == vm.primaryEmailAccountId" tooltip="Primary account"></i> {{ account.label }}</span></li><li class="inbox" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountList({labelId:\'INBOX\', accountId: account.id})">Inbox <span ng-if="vm.hasUnreadLabel(account, \'INBOX\')">({{ vm.unreadCountForLabel(account, \'INBOX\') }})</span></a><b></b></li><li class="sent" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountList({labelId:\'SENT\', accountId: account.id})">Sent <span ng-if="vm.hasUnreadLabel(account, \'SENT\')">({{ vm.unreadCountForLabel(account, \'SENT\') }})</span></a><b></b></li><li class="draft" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountList({labelId:\'DRAFT\', accountId: account.id})">Draft <span ng-if="vm.hasUnreadLabel(account, \'DRAFT\')">({{ vm.unreadCountForLabel(account, \'DRAFT\') }})</span></a><b></b></li><li class="trash" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountList({labelId:\'TRASH\', accountId: account.id})">Trash <span ng-if="vm.hasUnreadLabel(account, \'TRASH\')">({{ vm.unreadCountForLabel(account, \'TRASH\') }})</span></a><b></b></li><li ng-repeat="label in account.labels | orderBy:\'name\'" class="inbox" ng-if="label.label_type != 0" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountList({labelId: label.label_id, accountId: account.id})">{{ label.name }} <span ng-show="label.unread">({{ label.unread }})</span></a><b></b></li><li class="allmail" ui-sref-active="active"> <a class="btn" ui-sref="base.email.accountAllList({accountId: account.id})">All mail</a><b></b></li></ul>'),a.put("email/directives/contact_icon.html",'<td class="inbox-small-cells"><i ng-hide="status" class="fa fa-spinner fa-spin font-grey-cascade" tooltip="Loading status, hang on!"></i> <i ng-show="status == \'needsEverything\'" class="fa fa-building-o font-grey-cascade" tooltip-html-unsafe="New account, unknown contact. <br />Do the add thing!"></i><i ng-show="status == \'needsContact\'" class="fa fa-user font-blue-steel" tooltip="Hey, a new contact for the account! Add it for optimal Lily magic."></i><i ng-show="status == \'needsAccount\'" class="fa fa-building-o font-yellow-saffron" tooltip="Hey, a contact without an account! Add it for optimal Lily magic."></i><i ng-show="status == \'complete\'" class="fa fa-check font-green-jungle" tooltip="All done. Do a happy dance."></i></td>')}])}(angular);