{"version":3,"sources":["js/base/controllers/module.js","js/base/directives/module.js","js/base/filters/module.js","js/base/services/module.js","js/app.js","js/utils.js","js/analytics/analytics.js","js/forms/formsets.js","js/forms/select2.js","js/forms/show-and-hide.js","js/provide/dataprovider.js","js/base/controllers/base.js","js/base/controllers/header.js","js/base/controllers/sidebar.js","js/base/directives/checkbox.js","js/base/directives/date_formatter.js","js/base/directives/detail_delete.js","js/base/directives/resize_iframe.js","js/base/directives/sort_column.js","js/base/directives/spinnerbar.js","js/base/filters/min_value.js","js/base/filters/nl2br.js","js/base/filters/relative_date.js","js/base/filters/trust_as_resource_url.js","js/base/services/cookie.js","js/base/services/hl_date.js","js/base/services/hl_filters.js","js/base/services/hl_text.js","js/base/services/notifications.js"],"names":["angular","module","settings","$rootScope","layout","pageSidebarClosed","lilyAppConfig","$breadcrumbProvider","$controllerProvider","$httpProvider","$resourceProvider","$urlRouterProvider","setOptions","templateUrl","includeAbstract","allowGlobals","defaults","xsrfCookieName","xsrfHeaderName","stripTrailingSlashes","otherwise","runApp","$state","currentUser","factory","$inject","config","run","$","on","$phoneNumberInput","this","phone","val","match","typeId","attr","replace","select2","length","startsWith","substring","e","currentTarget","each","i","is","HLSelect2","init","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","window","document","ga","undefined","HLFormsets","formsetClass","self","isPlainObject","extend","formset","initListeners","body","formset_element","parents","add_element","find","indent","addClass","removeClass","stop","slideDown","toggleClass","closest","removeAttr","change","jQuery","tagInputs","ajaxInputs","tagsAjaxClass","ajaxPageLimit","clearText","setupSelect2","minimumResultsForSearch","createTagInputs","createAjaxInputs","data","hasOwnProperty","tags","$this","split","tokenSeparators","width","cf","_data","options","ajax","cache","term","page","hasClass","filterQuery","filterquery","size","sort","term_stripped","trim","filters","forEach","filter","indexOf","filter_val","filter_name","type","results","more","total","parsed_data","hits","hit","email_addresses","used_text","name","email_address","displayed_text","id","text","object_id","unshift","initSelection","item","callback","createSearchChoice","localeCompare","openOnEnter","multiple","initial","HLShowAndHide","selector","field","parent","input","setTimeout","HLDataProvider","buttonDataProvider","loadingText","loadingHeader","provideUrl","dataProviderClass","errorHeader","errorText","successHeader","successText","hiddenSuccessHeader","hiddenSuccessText","overwriteConfirmHeader","fields","formsets","event","findDataProviderInfo","call","which","preventDefault","button","$button","$form","$input","domain","sanitizeDomain","toastr","info","url","getJSON","done","error","message","fillForm","success","fail","always","slice","checkOverwrite","loopTroughFields","checkOverwriteFields","checkOverwriteLabels","confirm","join","fillField","loopTroughFormSets","filledHiddenField","label","$foundInput","$formsetDiv","$formsetAddLink","newFormsets","j","$newElement","newFormset","insertNewFormset","key","hasFoundInput","newVal","click","value","uniqueValues","concat","index","JSON","stringify","trigger","appConfig","$stateProvider","state","abstract","controller","ncyBreadcrumb","baseController","$scope","Notifications","conf","headTitle","pageTitleBig","pageTitleSmall","$on","Metronic","initComponents","autosize","loadNotifications","query","notifications","level","console","log","headerController","Layout","initHeader","sidebarController","initSidebar","checkbox","restrict","transclude","scope","model","directive","dateFormatter","dateFilter","require","link","element","attrs","ngModel","$formatters","detailDelete","elem","go","resizeIframe","maxHeight","outerHeight","ifDoc","ifRef","contentWindow","documentElement","e1","contentDocument","e2","subtractHeights","offset","top","height","scrollHeight","sortColumn","_setSortableIcon","sorted","table","order","column","ascending","$watchCollection","$apply","ngSpinnerBar","scrollTop","pageAutoScrollOnLoad","minValue","values","b","nl2br","$sce","msg","is_xhtml","breakTag","trustAsHtml","relativeDate","$filter","date","fallbackDateFormat","compareWithMidnight","calculateDelta","day","delta","hour","minute","week","month","year","now","setHours","setMinutes","setSeconds","Math","round","getFullYear","getMonth","getDate","innerWidth","ceil","floor","trustAsResourceUrl","Cookie","$cookieStore","CookieFactory","prefix","prototype","get","defaultValue","remove","put","service","HLDate","getSubtractedDate","days","setDate","HLFilters","updateFilterQuery","displayFilterClear","filterStrings","filterList","selected","clearFilters","HLText","String","hlCapitalize","newString","toLowerCase","charAt","toUpperCase","$resource"],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('app', [\n    'ui.bootstrap'\n]);\n","/**\n * app.directives is a container for all global lily related Angular directives\n */\nangular.module('app.directives', []);\n","angular.module('app.filters', []);\n","angular.module('app.services', []);\n","/**\n * lilyApp Module is the entry point for Lily related Angular code\n */\nangular.module('lilyApp', [\n    'ui.router',\n    'ui.bootstrap',\n    'ngResource',\n    'ngSanitize',\n    'ncy-angular-breadcrumb',\n\n    // Controllers\n    'app',\n    'app.accounts',\n    'app.cases',\n    'app.dashboard',\n    'app.email',\n    'app.preferences',\n    'app.preferences.email',\n    'app.preferences.user',\n    'app.templates',\n    'ContactsControllers',\n    'DealControllers',\n    'UtilsControllers',\n\n    // Directives\n    'app.directives',\n    'app.accounts.directives',\n    'app.cases.directives',\n    'app.contacts.directives',\n    'app.deals.directives',\n    'UtilsDirectives',\n\n    // Google Analytics\n    'angulartics',\n    'angulartics.google.analytics',\n\n    // Services\n    'app.services',\n\n    // Filters\n    'app.filters'\n]);\n\n/* Setup global settings */\nangular.module('lilyApp').factory('settings', settings);\n\nsettings.$inject = ['$rootScope'];\nfunction settings ($rootScope) {\n    // supported languages\n    var settings = {\n        layout: {\n            pageSidebarClosed: false // sidebar state\n        }\n    };\n\n    $rootScope.settings = settings;\n\n    return settings;\n}\n\nangular.module('lilyApp').config(lilyAppConfig);\n\nlilyAppConfig.$inject = [\n    '$breadcrumbProvider',\n    '$controllerProvider',\n    '$httpProvider',\n    '$resourceProvider',\n    '$urlRouterProvider'\n];\nfunction lilyAppConfig ($breadcrumbProvider, $controllerProvider, $httpProvider, $resourceProvider, $urlRouterProvider){\n    // Don't strip trailing slashes from calculated URLs, because django needs them\n    $breadcrumbProvider.setOptions({\n        templateUrl: 'breadcrumbs.html',\n        includeAbstract: true\n    });\n    $controllerProvider.allowGlobals();\n    $httpProvider.defaults.xsrfCookieName = 'csrftoken';\n    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';\n    $resourceProvider.defaults.stripTrailingSlashes = false;\n    $urlRouterProvider.otherwise('/');\n}\n\n/* Init global settings and run the app */\nangular.module('lilyApp').run(runApp);\n\nrunApp.$inject = ['$rootScope', 'settings', '$state'];\nfunction runApp ($rootScope, $state) {\n    $rootScope.$state = $state; // state to be accessed from view\n    $rootScope.currentUser = currentUser;\n}\n","$(function() {\n\n    $('body').on('blur', 'input[name^=\"phone\"]', function() {\n        // Format telephone number\n        var $phoneNumberInput = $(this);\n        var phone = $phoneNumberInput.val();\n        if (phone.match(/[a-z]|[A-Z]/)) {\n            // if letters are found, skip formatting: it may not be a phone field after all\n            return false;\n        }\n\n        // Match on mobile phone nrs e.g. +316 or 06, so we can automatically set the type to mobile.\n        if (phone.match(/^\\+316|^06/)) {\n            var typeId = $phoneNumberInput.attr('id').replace('raw_input', 'type');\n            $('#' + typeId).select2('val', 'mobile');\n        }\n\n        phone = phone\n            .replace(\"(0)\",\"\")\n            .replace(/\\s|\\(|\\-|\\)|\\.|x|:|\\*/g, \"\")\n            .replace(/^00/,\"+\");\n\n        if (phone.length == 0) {\n            return false;\n        }\n\n        if (!phone.startsWith('+')) {\n            if (phone.startsWith('0')) {\n                phone = phone.substring(1);\n            }\n            phone = '+31' + phone;\n        }\n\n        if (phone.startsWith('+310')) {\n            phone = '+31' + phone.substring(4);\n        }\n        $phoneNumberInput.val(phone);\n    });\n\n    $('body').on('change', 'select[id*=\"is_primary\"]', function(e) {\n        if($(e.currentTarget).val() == 'True'){\n            $('select[id*=\"is_primary\"]').each(function(i){\n                if($(this).is('select') && $(this).val() == 'True'){\n                    $(this).val('False');\n                }\n            });\n            $(e.currentTarget).val('True');\n            HLSelect2.init();\n        }\n    });\n});\n\nfunction addBusinessDays(date, businessDays) {\n    var weeks = Math.floor(businessDays/5);\n    var days = businessDays % 5;\n    var day = date.getDay();\n    if (day === 6 && days > -1) {\n       if (days === 0) {days-=2; day+=2;}\n       days++; dy -= 6;}\n    if (day === 0 && days < 1) {\n       if (days === 0) {days+=2; day-=2;}\n       days--; day += 6;}\n    if (day + days > 5) days += 2;\n    if (day + days < 1) days -= 2;\n    date.setDate(date.getDate() + weeks * 7 + days);\n    return date;\n}\n","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-60721851-1', 'auto');\n","(function($, window, document, undefined){\n    window.HLFormsets = {\n        config: {\n            formsetClass: '.formset'\n        },\n        init: function (config) {\n            var self = this;\n            // Setup configuration\n            if ($.isPlainObject(config)) {\n                $.extend(self.config, config);\n            }\n\n            $(self.config.formsetClass).formset();\n            self.initListeners();\n        },\n\n        initListeners: function() {\n            var self = this;\n            var body = $('body');\n\n            body.on('formAdded', '[data-formset-form]', function() {\n                var formset_element = $(this).parents('.formset');\n                var add_element = $(formset_element).find('.add-link');\n\n                var indent = ($(formset_element).attr('data-formset-indent') || 'true') == 'true';\n                if(indent) {\n                    $(add_element).find('.form-control-static').addClass('col-md-offset-2').removeClass('form-control-static');\n                }\n                $(add_element).find('label').addClass('hide');\n\n                if ($(formset_element).find('[data-formset-form]').length === 1) {\n                    $(this).find('label.hide').removeClass('hide');\n\n                    if(indent) {\n                        $(this).find('.field_wrapper').removeClass('col-md-offset-2');\n                    }\n                }\n                HLSelect2.init();\n            });\n\n            body.on('formDeleted', '[data-formset-form]', function() {\n                $(this).stop().slideDown();\n                $(this).find(':input:enabled:visible').attr('data-formset-disabled', true).attr('readonly', 'readonly');\n                $(this).find('[data-formset-delete-button]').toggleClass('hidden');\n                $(this).find('[data-formset-undo-delete]').toggleClass('hidden');\n            });\n\n            body.on('click', '[data-formset-form] [data-formset-undo-delete]', function() {\n                var formset = $(this).closest('[data-formset-form]');\n\n                formset.find('[data-formset-disabled=true]').removeAttr('data-formset-disabled').removeAttr('readonly');\n                formset.find('input[name$=\"DELETE\"]').attr('checked', false).change();\n                formset.find('[data-formset-delete-button]').toggleClass('hidden');\n                $(this).toggleClass('hidden');\n            });\n\n        }\n    }\n})(jQuery, window, document);\n","(function($, window, document, undefined){\n    window.HLSelect2 = {\n        config: {\n            tagInputs: 'input.tags',\n            ajaxInputs: 'input.select2ajax',\n            tagsAjaxClass: 'tags-ajax',\n            ajaxPageLimit: 30,\n            clearText: '-- Clear --'\n        },\n\n        init: function( config ) {\n            var self = this;\n            // Setup configuration\n            if ($.isPlainObject(config)) {\n                $.extend(self.config, config);\n            }\n            // On initialize, setup select2\n            self.setupSelect2();\n            self.initListeners();\n        },\n\n        initListeners: function() {\n            var self = this;\n            // When modal is shown, lets instantiate the select2 in the modals\n            $(document).on('shown.bs.modal', '.modal', function() {\n                self.setupSelect2();\n            });\n        },\n\n        setupSelect2: function() {\n            // Setup select2 for non-ajaxified selects, ajaxified selects\n            // are using hidden inputs.\n            $('select').select2({\n                // at least this many results are needed to enable the search field\n                // (9 is the amount at which the user must scroll to see all items)\n                minimumResultsForSearch: 9\n            });\n            this.createTagInputs();\n            this.createAjaxInputs();\n        },\n\n        createTagInputs: function() {\n            // Setup tag inputs\n            $(this.config.tagInputs).each(function() {\n                if (!$(this).data().hasOwnProperty('select2')) {\n                    var tags = [];\n                    var $this = $(this);\n                    if ($this.data('choices')) {\n                        tags = $this.data('choices').split(',');\n                    }\n                    $this.select2({\n                        tags: tags,\n                        tokenSeparators: [',', ' '],\n                        width: '100%'\n                    });\n                }\n            });\n        },\n\n        createAjaxInputs: function() {\n            // Setup inputs that needs remote link\n            var self = this;\n            var cf = self.config;\n\n            $(cf.ajaxInputs).each(function() {\n                var $this = $(this);\n                var _data = $this.data();\n                // _data.tags is a marker for AjaxSelect2Widget which indicates\n                // that it expects multiple values as input.\n\n                // Prevent Select2 from being initialized on elements that already have Select2\n                if (!_data.hasOwnProperty('select2')) {\n                    var options = {\n                        ajax: {\n                            cache: true,\n                            data: function (term, page) {\n                                // page is the one-based page number tracked by Select2\n                                var data = null;\n\n                                if ($this.hasClass(cf.tagsAjaxClass) && !_data.tags) {\n                                    if (term === '') {\n                                        // elasticsearch breaks when the term is empty, so just look for non-empty results\n                                        term = '*';\n                                    }\n                                    // search for contacts and accounts containing the search term, but only those with an email address\n                                    var filterQuery = '((_type:contacts_contact AND (name:' + term + ' OR email_addresses.email_address:' + term + ')) ' +\n                                        'OR (_type:accounts_account AND (name:' + term + ' OR email_addresses.email_address:' + term + '))) ' +\n                                        'AND email_addresses.email_address:*';\n\n                                    data = {\n                                        filterquery: filterQuery,\n                                        size: cf.ajaxPageLimit, // page size\n                                        page: (page - 1), // page number, zero-based\n                                        sort: '-modified' //sort modified descending\n                                    };\n                                }\n                                else {\n                                    var term_stripped = term.trim();\n                                    data = {\n                                        filterquery: term_stripped ? 'name:('+term_stripped+')' : '', //search term\n                                        size: cf.ajaxPageLimit, // page size\n                                        page: (page - 1), // page number, zero-based\n                                        sort: '-modified' //sort modified descending\n                                    };\n                                }\n\n                                var filters = $this.data('filter-on');\n                                if (typeof filters !== 'undefined' && filters !== '') {\n                                    filters.split(',').forEach(function (filter) {\n                                        if (filter.indexOf('id_') === 0) {\n                                            var filter_val = $('#' + filter).val();\n                                            var filter_name = filter.substring(3);\n                                            if (filter_name.indexOf('case_quickbutton_') === 0) {\n                                                filter_name = filter.substring(20);\n                                            } else if (filter_name == 'account') {\n                                                // This is a special case at the moment, in the future we might have\n                                                // more cases like this.\n                                                // But for now, just do this check\n                                                filter_name = 'accounts.id';\n                                            }\n                                            if (filter_val && filter_val > 0) {\n                                                data.filterquery += ' ' + filter_name + ':' + filter_val;\n                                            }\n                                        } else {\n                                            data.type = filter;\n                                        }\n                                    });\n                                }\n\n                                return data;\n                            },\n\n                            results: function (data, page) {\n                                var more = (page * cf.ajaxPageLimit) < data.total; // whether or not there are more results available\n\n                                if ($this.hasClass(cf.tagsAjaxClass) && !_data.tags) {\n                                    var parsed_data = [];\n\n                                    data.hits.forEach(function (hit) {\n                                        // Only display contacts with an e-mail address\n                                        for (var i = 0; i < hit.email_addresses.length; i++) {\n                                            // The text which is actually used in the application\n                                            var used_text = '\"' + hit.name + '\" <' + hit.email_addresses[i].email_address + '>';\n                                            // The displayed text\n                                            var displayed_text = hit.name + ' <' + hit.email_addresses[i].email_address + '>';\n                                            // Select2 sends 'id' as the value, but we want to use the email\n                                            // So store the actual id (hit.id) under a different name\n                                            parsed_data.push({id: used_text, text: displayed_text, object_id: hit.id});\n                                        }\n                                    });\n\n                                    // Array elements with empty text can't be added to select2, so manually fill a new array\n                                    data.hits = parsed_data;\n                                }\n                                else {\n                                    data.hits.forEach(function (hit) {\n                                        hit.text = hit.name;\n                                    });\n                                }\n\n                                // Add clear option, but not for multiple select2.\n                                if ((page == 1 && !$this.hasClass(cf.tagsAjaxClass)) && !_data.tags) {\n                                    data.hits.unshift({id: -1, text:cf.clearText});\n                                }\n                                return {\n                                    results: data.hits,\n                                    more: more\n                                };\n                            }\n                        },\n\n                        initSelection: function (item, callback) {\n                            var id = item.val();\n                            var text = item.data('selected-text');\n                            var data = { id: id, text: text };\n                            callback(data);\n                        }\n                    };\n\n                    if ($this.hasClass(cf.tagsAjaxClass)) {\n                        options.tags = true;\n                        options.tokenSeparators = [',', ' '];\n                        // Create a new tag if there were no results\n                        options.createSearchChoice = function (term, data) {\n                            if ($(data).filter(function () {\n                                    return this.text.localeCompare(term) === 0;\n                                }).length === 0) {\n                                return {\n                                    id: term,\n                                    text: term\n                                };\n                            }\n                        };\n                        // Prevent select2 dropdown from opening when pressing enter\n                        options.openOnEnter = false;\n                    }\n\n                    // Set select2 to multiple.\n                    if(_data.tags) {\n                        options.tags = true;\n                        options.multiple = true;\n                    }\n\n\n                    $this.select2(options);\n                    // Set the initial form value from a JSON encoded data attribute called data-initial\n                    if(_data.tags) {\n                        $this.select2('data', _data.initial);\n                    }\n                }\n            });\n        }\n    };\n\n})(jQuery, window, document);\n","(function($, window, document, undefined){\n    window.HLShowAndHide = {\n        config: {\n            selector: '.show-and-hide-input'\n        },\n\n        init: function( config ) {\n            var self = this;\n            // Setup configuration\n            if ($.isPlainObject(config)) {\n                $.extend(self.config, config);\n            }\n            // On initialize, setup show and hide\n            self.initListeners();\n        },\n\n        initListeners: function() {\n            var self = this;\n\n            // When modal is shown, lets instantiate the select2 in the modals\n            $('body').on('click', '.form .toggle-original-form-input', function() {\n                var field = $(this).closest('.show-and-hide-input');\n\n                /* hide clicked link */\n                $(this).parent().addClass('hide');\n\n                /* toggle form input */\n                if($(this).data('action') == 'show') {\n                    /* show the other link */\n                    $(field).find('[data-action=\"hide\"]').parent().removeClass('hide');\n\n                    /* show the form input */\n                    $(field).find('.original-form-widget').removeClass('hide');\n\n                    /* (re)enable fields */\n                    $(field).find(':input').removeAttr('disabled');\n\n                    var input = $(field).find(':input:visible:not([type=\"file\"]):first');\n                    if(input) {\n                        /* adding to the end of the execution queue reliably sets the focus */\n                        /*  e.g. without, this only works once for select2 inputs */\n                        setTimeout(function() {\n                            // setCaretAtEnd(input);\n                        }, 0);\n                    }\n                } else if($(this).data('action') == 'hide') {\n                    /* show the other link */\n                    $(field).find('[data-action=\"show\"]').parent().removeClass('hide');\n\n                    /* hide the form input */\n                    $(field).find('.original-form-widget').addClass('hide');\n\n                    /* disabled fields will not be posted */\n                    $(field).find(':input').attr('disabled', 'disabled');\n                }\n            });\n        }\n    };\n\n})(jQuery, window, document);\n","(function($, window, document, undefined) {\n    window.HLDataProvider = {\n        config: {\n            buttonDataProvider: ':button.dataprovider',\n            loadingText: 'Beaming up the information now, almost within range!',\n            loadingHeader: 'I\\'m on my way!',\n            provideUrl: '/provide/account/',\n            dataProviderClass: '.dataprovider',\n            errorHeader: 'Oops!',\n            errorText: 'There was an error trying to fetch your data, please don\\'t be mad.',\n            successHeader: 'Yeah!',\n            successText: 'We did it! Your new data should be right there waiting for you.',\n            hiddenSuccessHeader: 'Psst!',\n            hiddenSuccessText: 'Did you know I did more work in the background? ;)',\n            overwriteConfirmHeader: 'Do you wish to overwrite the following fields?\\n',\n            fields: [\n                'name',\n                'description',\n                'legalentity',\n                'taxnumber',\n                'bankaccountnumber',\n                'cocnumber',\n                'iban',\n                'bic',\n            ],\n            formsets: [\n                'email_addresses',\n                'phone_numbers',\n                'addresses'\n            ]\n        },\n\n        init: function(config) {\n            // Setup config\n            var self = this;\n            if ($.isPlainObject(config)) {\n                $.extend(self.config, config);\n            }\n\n            self.initListeners();\n        },\n\n        initListeners: function() {\n            var self = this,\n                cf = self.config;\n\n            $('body').on('click', cf.buttonDataProvider, function(event) {\n                // On button press\n                self.findDataProviderInfo.call(self, this, event);\n            }).on('keydown', 'div' + cf.dataProviderClass + ' > input', function(event) {\n                // Catch ENTER on Dataprovider input\n                if (event.which === 13) {\n                    self.findDataProviderInfo.call(self, cf.buttonDataProvider, event);\n                    // Prevent form submission\n                    event.preventDefault();\n                }\n            });\n        },\n\n        findDataProviderInfo: function(button, event) {\n            var self = this,\n                cf = self.config,\n                $button = $(button),\n                $form = $button.closest('form'),\n                $input = $('div' + cf.dataProviderClass +' > input'),\n                domain = self.sanitizeDomain($input.val());\n\n            // Show busy gui to user\n            $button.button('loading');\n            toastr.info(cf.loadingText, cf.loadingHeader);\n\n            var url = cf.provideUrl + domain;\n            $.getJSON(url)\n                .done(function(data) {\n                    if (data.error) {\n                        toastr.error(data.error.message, cf.errorHeader);\n                    } else {\n                        self.fillForm($form, data, cf.fields, cf.formsets);\n                        toastr.success(cf.successText, cf.successHeader);\n                    }\n                })\n                .fail(function() {\n                    toastr.error(cf.errorText, cf.errorHeader);\n                })\n                .always(function() {\n                    $button.button('reset');\n                });\n\n            event.preventDefault();\n        },\n\n        sanitizeDomain: function(url) {\n            var domain = $.trim(url.replace('http://', ''));\n            domain = $.trim(domain.replace('https://', ''));\n            // Always add last '/'\n            if (domain.slice(-1) !== '/') {\n                domain += '/';\n            }\n            return domain;\n        },\n\n        fillForm: function($form, data, fields, formsets) {\n            var self = this,\n                cf = self.config;\n\n            var checkOverwrite = self.loopTroughFields(fields, $form, data),\n                checkOverwriteFields = checkOverwrite[0],\n                checkOverwriteLabels = checkOverwrite[1];\n\n            // Check if there are fields for which we need to do an overwrite check\n            if (checkOverwriteFields.length) {\n                // Ask the user whether to overwrite or not\n                if (confirm(cf.overwriteConfirmHeader + checkOverwriteLabels.join('\\n'))) {\n                    // Loop through fields that need to be overwritten\n                    checkOverwriteFields.forEach(function(field) {\n                        var $input = $form.find('[name=\"' + field + '\"]');\n                        self.fillField($input, data[field]);\n                    });\n                }\n            }\n\n            // Loop through formsets\n            self.loopTroughFormSets(formsets, $form, data);\n\n        },\n\n        loopTroughFields: function(fields, $form, data) {\n            var self = this,\n                cf = self.config,\n                checkOverwriteFields = [],\n                checkOverwriteLabels = [],\n                filledHiddenField = false;\n\n            // Loop through all fields\n            fields.forEach(function(field) {\n                // Input is the field in the current form\n                var $input = $form.find('[name=\"' + field + '\"]');\n                // Always clear the field if it's hidden\n                if ($input.attr('type') == 'hidden' || $input.parent().hasClass('hide')) {\n                    $input.val('');\n                    if (data[field]) {\n                        filledHiddenField = true;\n                    }\n                }\n                // Check if there is data for the field, else do nothing\n                if (data[field]) {\n                    // Check if the field does not exist in the current form\n                    if ($input.val() !== undefined) {\n                        // Check if the field has a value and that value is not the field placeholder\n                        if ($input.val().length && $input.val() !== $input.attr('placeholder')) {\n                            // Display label of field instead of field name\n                            var label = $input.parents('.form-group').find('label').text();\n                            // Field is not empty, check before overwrite\n                            checkOverwriteFields.push(field);\n                            checkOverwriteLabels.push('- ' + label);\n                        } else {\n                            // Field is empty, fill it with new data\n                            self.fillField($input, data[field]);\n                        }\n                    }\n                }\n            });\n\n            if (filledHiddenField) {\n                toastr.success(cf.hiddenSuccessText, cf.hiddenSuccessHeader);\n            }\n\n            return [checkOverwriteFields, checkOverwriteLabels];\n        },\n\n        loopTroughFormSets: function(formsets, $form, data){\n            for (var i=0; i < formsets.length; i++) {\n                var formset = formsets[i];\n                // Check if there is data for the formset\n                if (data[formset] && data[formset].length) {\n                    var $formsetDiv = $form.find('#' + formset),\n                        $formsetAddLink = $formsetDiv.find('[data-formset-add]'),\n                        newFormsets = data[formset],\n                        $foundInput;\n\n                    for (var j = 0; j < newFormsets.length; j++) {\n                        var newFormset = newFormsets[j],\n                            insertNewFormset = false,\n                            $newElement;\n\n                        if (typeof newFormset === 'object') {\n                            var key,\n                                hasFoundInput = false;\n                            for (key in newFormset) {\n                                $foundInput = $formsetDiv.find(':input[name$=\"' + key +'\"]');\n                                if ($foundInput.length){\n                                    hasFoundInput = true;\n                                    $foundInput = $foundInput.filter(function () {\n                                        var val = $(this).val(),\n                                            newVal = newFormset[key];\n\n                                        return ((val === '' && newVal === null) || val == newVal);\n                                    });\n                                    if (!$foundInput.length) {\n                                        // One of the values is different so we need to add a new formset\n                                        insertNewFormset = true;\n                                    }\n                                }\n                            }\n                            if (insertNewFormset || !hasFoundInput) {\n                                $formsetAddLink.click();\n                                $newElement =  $formsetDiv.find('[data-formset-body] [data-formset-form]:last');\n                                for (key in newFormset) {\n                                    $newElement.find(':input[name$=\"' + key +'\"]').val(newFormset[key]);\n                                }\n                            }\n                        } else if (typeof newFormset === 'string') {\n                            $foundInput = $formsetDiv.find(':input').filter(function () {\n                                return $(this).val() == newFormset;\n                            });\n                            if (!$foundInput.length) {\n                                $formsetAddLink.click();\n                                $newElement =  $formsetDiv.find('[data-formset-body] [data-formset-form]:last');\n                                $newElement.find(':input:first').val(newFormset);\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        fillField: function($input, value) {\n            if (typeof value === 'string') {\n                // String\n                $input.val(value);\n            } else if (typeof value[0] === 'string') {\n                // List of strings\n                var uniqueValues = value.concat($input.val().split(',')).filter(function(val, index, self) {\n                    return (self.indexOf(val) === index) && (val !== '');\n                });\n                $input.val(uniqueValues.join());\n            } else {\n                // JSON object\n                $input.val(JSON.stringify(value));\n            }\n            $input.change();\n            if ($input.parent().hasClass('original-form-widget') && $input.parent().hasClass('hide')) {\n                // show the input, by reusing the click handler as defined in the utils.\n                $input.parents(\".show-and-hide-input\").find('a[data-action=\"show\"]').trigger('click');\n            }\n        }\n    }\n})(jQuery, window, document);\n","angular.module('app').config(appConfig);\n\nappConfig.$inject = ['$stateProvider'];\nfunction appConfig ($stateProvider) {\n    $stateProvider.state('base', {\n        abstract: true,\n        controller: 'baseController',\n        ncyBreadcrumb: {\n            label: 'Lily'\n        }\n    });\n}\n\n/**\n * BaseController is the controller where all the default things are loaded\n *\n */\nangular.module('app').controller('baseController', baseController);\n\nbaseController.$inject = ['$scope', 'Notifications'];\nfunction baseController ($scope, Notifications) {\n    $scope.conf = {\n        headTitle: 'Welcome!',\n        pageTitleBig: 'HelloLily',\n        pageTitleSmall: 'welcome to my humble abode!'\n    };\n\n    //$scope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {\n    //    console.log('Starting the state change');\n    //});\n    //\n    //$scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams) {\n    //    console.log('The state has been changed');\n    //});\n\n    $scope.$on('$viewContentLoaded', function() {\n        Metronic.initComponents(); // init core components\n        HLSelect2.init();\n        HLFormsets.init();\n        HLShowAndHide.init();\n        autosize($('textarea'));\n\n        $scope.loadNotifications();\n    });\n\n    $scope.loadNotifications = function(){\n        Notifications.query(function(notifications) {  // On success\n            angular.forEach(notifications, function(message) {\n                toastr[message.level](message.message);\n            });\n        }, function(error) {  // On error\n            console.log('error!');\n            console.log(error);\n        })\n    };\n}\n","angular.module('app').controller('headerController', headerController);\n\nheaderController.$inject = ['$scope'];\nfunction headerController ($scope) {\n    $scope.$on('$includeContentLoaded', function() {\n        Layout.initHeader(); // init header\n    });\n}\n","angular.module('app').controller('sidebarController', sidebarController);\n\nsidebarController.$inject = ['$scope'];\nfunction sidebarController ($scope) {\n    $scope.$on('$includeContentLoaded', function() {\n        Layout.initSidebar(); // init sidebar\n    });\n}\n","/**\n * checkbox Directive makes a nice uniform checkbox and binds to a model\n *\n * @param model object: model to bind checkbox with\n *\n * Example:\n * <checkbox model=\"table.visibility.name\">Name</checkbox>\n */\nangular.module('app.directives').directive('checkbox', checkbox);\n\nfunction checkbox () {\n    return {\n        restrict: 'E',\n        replace: true,\n        transclude: true,\n        scope: {\n            model: '='\n        },\n        templateUrl: 'js/base/directives/checkbox.html'\n    }\n}\n","/**\n * Directive give a nice formatting on input elements.\n *\n * It makes sure that the value of the ngModel on the scope has a nice\n * formatting for the user\n */\nangular.module('app.directives').directive('dateFormatter', dateFormatter);\n\ndateFormatter.$inject = ['dateFilter'];\nfunction dateFormatter(dateFilter) {\n    return {\n        restrict: 'A',\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            ngModel.$formatters.push(function(value) {\n                if (value) {\n                    return dateFilter(value, attrs.dateFormatter);\n                }\n            })\n        }\n    }\n}\n","/**\n * Directive for a confirmation box before the delete in the detail\n * view happens\n */\nangular.module('app.directives').directive('detailDelete', detailDelete);\n\ndetailDelete.$inject = ['$state'];\nfunction detailDelete ($state) {\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attrs) {\n\n            $(elem).click(function () {\n                if (confirm('You are deleting! Are you sure ?')) {\n                    $state.go('.delete');\n                }\n            });\n        }\n    }\n}\n","angular.module('app.directives').directive('resizeIframe', resizeIframe);\n\nfunction resizeIframe () {\n    return {\n        restrict: 'A',\n        link: function ($scope, element, attrs) {\n            var maxHeight = $('body').outerHeight();\n            element.on('load', function() {\n                element.removeClass('hidden');\n\n                // do this after .inbox-view is visible\n                var ifDoc, ifRef = this;\n\n                // set ifDoc to 'document' from frame\n                try {\n                    ifDoc = ifRef.contentWindow.document.documentElement;\n                } catch (e1) {\n                    try {\n                        ifDoc = ifRef.contentDocument.documentElement;\n                    } catch (e2) {\n                    }\n                }\n\n                // calculate and set max height for frame\n                if (ifDoc) {\n                    var subtractHeights = [\n                        element.offset().top,\n                        $('.footer').outerHeight(),\n                        $('.inbox-attached').outerHeight()\n                    ];\n                    for (var height in subtractHeights) {\n                        maxHeight = maxHeight - height;\n                    }\n\n                    if (ifDoc.scrollHeight > maxHeight) {\n                        ifRef.height = maxHeight;\n                    } else {\n                        ifRef.height = ifDoc.scrollHeight;\n                    }\n                }\n            });\n        }\n    }\n}\n","/**\n * sortColumn Directive adds sorting classes to an DOM element based on `table` object\n *\n * It makes the element clickable and sets the table sorting based on that element\n *\n * @param sortColumn string: name of the column to sort on when clicked\n * @param table object: The object to bind sort column and ordering\n *\n * Example:\n *\n * <th sort-column=\"last_name\" table=\"table\">Name</th>\n *\n * Possible classes:\n * - sorting: Unsorted\n * - sorting_asc: Sorted ascending\n * - sorting_desc: Sorted descending\n */\nangular.module('app.directives').directive('sortColumn', sortColumn);\n\nfunction sortColumn () {\n    /**\n     * _setSortableIcon() removes current sorting classes and adds new based on current\n     * sorting column and direction\n     *\n     * @param $scope object: current scope\n     * @param element object: current DOM element\n     * @param sortColumn string: column from current DOM element\n     */\n    var _setSortableIcon = function($scope, element, sortColumn) {\n        // Add classes based on current sorted column\n        if($scope.table.order.column === sortColumn) {\n            if ($scope.table.order.ascending) {\n                $scope.sorted = 1;\n            } else {\n                $scope.sorted = -1;\n            }\n        } else {\n            $scope.sorted = 0;\n        }\n    };\n\n    return {\n        restrict: 'A',\n        scope: {\n            table: '='\n        },\n        transclude: true,\n        templateUrl: 'js/base/directives/sort_column.html',\n        link: function ($scope, element, attrs) {\n            // Watch the table ordering & sorting\n            $scope.$watchCollection('table.order', function() {\n                _setSortableIcon($scope, element, attrs.sortColumn);\n            });\n\n            // When element is clicked, set the table ordering & sorting based on this DOM element\n            element.on('click', function() {\n                if($scope.table.order.column === attrs.sortColumn) {\n                    $scope.table.order.ascending = !$scope.table.order.ascending;\n                    $scope.$apply();\n                } else {\n                    $scope.table.order.column = attrs.sortColumn;\n                    $scope.$apply();\n                }\n            });\n        }\n    }\n}\n","angular.module('app.directives').directive('ngSpinnerBar', ngSpinnerBar);\n\nngSpinnerBar.$inject = ['$rootScope'];\nfunction ngSpinnerBar ($rootScope) {\n    return {\n        link: function(scope, element, attrs) {\n            // by defult hide the spinner bar\n            element.addClass('hide'); // hide spinner bar by default\n\n            // display the spinner bar whenever the route changes(the content part started loading)\n            $rootScope.$on('$stateChangeStart', function() {\n                element.removeClass('hide'); // show spinner bar\n            });\n\n            // hide the spinner bar on rounte change success(after the content loaded)\n            $rootScope.$on('$stateChangeSuccess', function() {\n                element.addClass('hide'); // hide spinner bar\n                $('body').removeClass('page-on-load'); // remove page loading indicator\n\n                // auto scroll to page top\n                setTimeout(function () {\n                    Metronic.scrollTop(); // scroll to the top on content load\n                }, $rootScope.settings.layout.pageAutoScrollOnLoad);\n            });\n\n            // handle errors\n            $rootScope.$on('$stateNotFound', function() {\n                element.addClass('hide'); // hide spinner bar\n            });\n\n            // handle errors\n            $rootScope.$on('$stateChangeError', function() {\n                element.addClass('hide'); // hide spinner bar\n            });\n        }\n    };\n}\n","angular.module('app.filters').filter('minValue', minValue);\nfunction minValue () {\n    return function(values) {\n        values.sort(function(a, b){return a-b});\n        return values[0];\n    }\n}\n","angular.module('app.filters').filter('nl2br', nl2br);\n\nnl2br.$inject = ['$sce'];\nfunction nl2br ($sce) {\n    return function(msg,is_xhtml) {\n        var is_xhtml = is_xhtml || true;\n        var breakTag = (is_xhtml) ? '<br />' : '<br>';\n        var msg = (msg + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1'+ breakTag +'$2');\n        return $sce.trustAsHtml(msg);\n    }\n}\n","/**\n * relativeDate filter is a filter that represents the date in a nice format\n *\n * relativeDate will return a relative date string given the date. If the\n * date is to far in the past, it will fallback to angulars $filter\n *\n * @param: date {date|string} : date object or date string to transform\n * @param: fallbackDateFormat string (optional): fallback $filter argument\n * @param: compareWithMidnight boolean (optional): should the date comparison be with midnight or not\n *\n * @returns: string : a relative date string\n *\n * usage:\n *\n * {{ '2014-11-19T12:44:15.795312+00:00' | relativeDate }}\n */\nangular.module('app.filters').filter('relativeDate', relativeDate);\n\nrelativeDate.$inject = ['$filter'];\nfunction relativeDate ($filter) {\n    return function (date, fallbackDateFormat, compareWithMidnight) {\n        // Get current date\n        var now = new Date(),\n            calculateDelta, day, delta, hour, minute, week, month, year;\n\n        // If date is a string, format to date object\n        if (!(date instanceof Date)) {\n            date = new Date(date);\n            if (compareWithMidnight) {\n                // In certain cases we want to compare with midnight\n                date.setHours(23);\n                date.setMinutes(59);\n                date.setSeconds(59);\n            }\n        }\n\n        delta = null;\n        minute = 60;\n        hour = minute * 60;\n        day = hour * 24;\n        week = day * 7;\n        month = day * 30;\n        year = day * 365;\n\n        // Calculate delta in seconds\n        calculateDelta = function () {\n            return delta = Math.round((date - now) / 1000);\n        };\n\n        calculateDelta();\n\n        if (delta > day && delta < week) {\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n            if (compareWithMidnight) {\n                // In certain cases we want to compare with midnight\n                date.setHours(23);\n                date.setMinutes(59);\n                date.setSeconds(59);\n            }\n            calculateDelta();\n        }\n\n        if (!fallbackDateFormat) {\n            if (window.innerWidth < 992) {\n                // Display as a short version if it's a small screen (tablet, smartphone, etc.)\n                fallbackDateFormat = 'dd MMM. yyyy'; // Renders as 29 Jan. 2015\n            }\n            else {\n                fallbackDateFormat = 'dd MMMM yyyy'; // Renders as 29 January 2015\n            }\n        }\n\n        // Check delta and return result\n        if (delta < 0) {\n            switch (false) {\n                case !(-delta > week):\n                    return $filter('date')(date, fallbackDateFormat);\n                case !(-delta > day * 2):\n                    return '' + -(Math.ceil(delta / day)) + ' days ago';\n                case !(-delta > day):\n                    return 'yesterday';\n                case !(-delta > hour):\n                    return '' + -(Math.ceil(delta / hour)) + ' hours ago';\n                case !(-delta > minute * 2):\n                    return '' + -(Math.ceil(delta / minute)) + ' minutes ago';\n                case !(-delta > minute):\n                    return 'a minutes ago';\n                case !(-delta > 30):\n                    return '' + -delta + ' seconds ago';\n                default:\n                    return 'just now';\n            }\n        } else {\n            switch (false) {\n                case !(delta < 30):\n                    return 'just now';\n                case !(delta < minute):\n                    return '' + delta + ' seconds';\n                case !(delta < 2 * minute):\n                    return 'a minute';\n                case !(delta < hour):\n                    return '' + (Math.floor(delta / minute)) + ' minutes';\n                case Math.floor(delta / hour) !== 1:\n                    return 'an hour';\n                case !(delta < day):\n                    return '' + (Math.floor(delta / hour)) + ' hours';\n                case !(delta < day * 2):\n                    return 'tomorrow';\n                case !(delta < week):\n                    return '' + (Math.floor(delta / day)) + ' days';\n                case Math.floor(delta / week) !== 1:\n                    return 'a week';\n                default:\n                    // Use angular $filter\n                    return $filter('date')(date, fallbackDateFormat);\n            }\n        }\n    }\n}\n","angular.module('app.filters').filter('trustAsResourceUrl', trustAsResourceUrl);\n\ntrustAsResourceUrl.$inject = ['$sce'];\nfunction trustAsResourceUrl ($sce) {\n    return function(val) {\n        return $sce.trustAsResourceUrl(val);\n    };\n}\n","/**\n * Cookie Service provides a simple interface to get and store cookie values\n *\n * Set `prefix` to give cookie keys a prefix\n */\nangular.module('app.services').service('Cookie', Cookie);\n\nCookie.$inject = ['$cookieStore'];\nfunction Cookie ($cookieStore) {\n    function CookieFactory (prefix) {\n        return new Cookie(prefix);\n    }\n\n    function Cookie(prefix) {\n        this.prefix = prefix;\n    }\n\n    /**\n     * getCookieValue() tries to retrieve a value from the cookie, or returns default value\n     *\n     * @param field string: key to retrieve info from\n     * @param defaultValue {*}: default value when nothing set on cache\n     * @returns {*}: retrieved or default value\n     */\n    Cookie.prototype.get = function (field, defaultValue) {\n        try {\n            var value = $cookieStore.get(this.prefix + field);\n            return (value !== undefined) ? value : defaultValue;\n        } catch (error) {\n            $cookieStore.remove(this.prefix + field);\n            return defaultValue;\n        }\n    };\n\n    /**\n     * setCookieValue() sets value on the cookie\n     *\n     * It prefixes the field to make field unique for this controller\n     *\n     * @param field string: the key on which to store the value\n     * @param value {*}: JSON serializable object to store\n     */\n    Cookie.prototype.put = function (field, value) {\n        $cookieStore.put(this.prefix + field, value);\n    };\n\n    return CookieFactory;\n}\n","angular.module('app.services').service('HLDate', HLDate);\n\nfunction HLDate () {\n    /**\n     * getSubtractedDate() subtracts x amount of days from the current date\n     *\n     * @param days (int): amount of days to subtract from the current date\n     *\n     * @returns (string): returns the subtracted date in a yyyy-mm-dd format\n     */\n    this.getSubtractedDate = function (days) {\n        var date = new Date();\n        date.setDate(date.getDate() - days);\n\n        return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    };\n}\n","angular.module('app.services').service('HLFilters', HLFilters);\n\nfunction HLFilters () {\n    this.updateFilterQuery = function ($scope) {\n        $scope.table.filterQuery = '';\n        $scope.displayFilterClear = false;\n        var filterStrings = [];\n\n        for (var i = 0; i < $scope.filterList.length; i++) {\n            var filter = $scope.filterList[i];\n            if (filter.id && filter.id == 'archived') {\n                if (!filter.selected) {\n                    filterStrings.push('archived:false');\n                }\n                else {\n                    $scope.displayFilterClear = true;\n                }\n            }\n            else {\n                if (filter.selected) {\n                    filterStrings.push(filter.value);\n                    $scope.displayFilterClear = true;\n                }\n            }\n        }\n\n        $scope.table.filterQuery = filterStrings.join(' AND ');\n    };\n\n    this.clearFilters = function ($scope) {\n        for (var i = 0; i < $scope.filterList.length; i++) {\n            $scope.filterList[i].selected = false;\n        }\n\n        $scope.updateFilterQuery();\n    };\n}\n","angular.module('app.services').service('HLText', HLText);\nfunction HLText () {\n    /**\n     * hlCapitalize() lowercases the whole string and makes the first character uppercase\n     * This means 'STRING' becomes 'String'\n     *\n     * @returns (string): returns a string with only the first character uppercased\n     */\n    String.prototype.hlCapitalize = function () {\n        var newString = this.toLowerCase();\n        return newString.charAt(0).toUpperCase() + newString.substring(1);\n    }\n}\n","angular.module('app.services').factory('Notifications', Notifications);\n\nNotifications.$inject = ['$resource'];\n\nfunction Notifications ($resource) {\n    return $resource('/api/utils/notifications/');\n}\n"],"sourceRoot":"/source/"}